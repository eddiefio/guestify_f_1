"use strict";(()=>{var e={};e.id=35,e.ids=[35,888,660],e.modules={4784:(e,t,s)=>{s.r(t),s.d(t,{config:()=>_,default:()=>f,getServerSideProps:()=>P,getStaticPaths:()=>S,getStaticProps:()=>w,reportWebVitals:()=>v,routeModule:()=>R,unstable_getServerProps:()=>q,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var r={};s.r(r),s.d(r,{default:()=>ResetPassword});var a=s(7093),o=s(5244),n=s(1323),i=s(9209),l=s.n(i),u=s(9597),d=s(997),c=s(6689),p=s(1163),m=s(1664),x=s.n(m),h=s(5102),g=s(7016),b=s(4478);function ResetPassword(){let[e,t]=(0,c.useState)(""),[s,r]=(0,c.useState)(""),[a,o]=(0,c.useState)(""),[n,i]=(0,c.useState)(!1),[l,u]=(0,c.useState)(null),[m,h]=(0,c.useState)(!1),f=(0,p.useRouter)(),{updatePassword:w}=(0,g.a)();(0,c.useEffect)(()=>{let{access_token:e}=f.query;if(e)o(e),document.cookie=`access_token=${e}; path=/; max-age=3600; SameSite=Lax`;else{let e=document.cookie.split(";"),t=e.find(e=>e.trim().startsWith("access_token="));if(t){let e=t.split("=")[1];o(e)}}},[f.query]);let handleSubmit=async t=>{if(t.preventDefault(),i(!0),u(null),h(!1),e!==s){u("Passwords do not match"),i(!1);return}try{a&&b.O.auth.setSession(a);let{error:t}=await w(e);if(t)throw t;h(!0),document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(()=>{f.push("/auth/signin")},3e3)}catch(e){console.error("Error updating password:",e),u(e.message||"Failed to update password")}finally{i(!1)}};return(0,d.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Reset Your Password"}),d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please enter your new password below."}),l&&d.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:l}),m&&d.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Password updated successfully! Redirecting to sign in..."}),(0,d.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[d.jsx("input",{type:"hidden",name:"access_token",value:a}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),d.jsx("input",{type:"password",id:"new_password",value:e,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),d.jsx("input",{type:"password",id:"confirm_password",value:s,onChange:e=>r(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),d.jsx("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold",disabled:n||!a,children:n?"Updating...":"Update Password"})]}),d.jsx("div",{className:"mt-4 text-center text-sm",children:d.jsx(x(),{href:"/auth/signin",children:d.jsx("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Sign In"})})})]})}ResetPassword.getLayout=function(e){return d.jsx(h.Z,{title:"Reset Password - Guestify",children:e})};let f=(0,n.l)(r,"default"),w=(0,n.l)(r,"getStaticProps"),S=(0,n.l)(r,"getStaticPaths"),P=(0,n.l)(r,"getServerSideProps"),_=(0,n.l)(r,"config"),v=(0,n.l)(r,"reportWebVitals"),j=(0,n.l)(r,"unstable_getStaticProps"),y=(0,n.l)(r,"unstable_getStaticPaths"),k=(0,n.l)(r,"unstable_getStaticParams"),q=(0,n.l)(r,"unstable_getServerProps"),N=(0,n.l)(r,"unstable_getServerSideProps"),R=new a.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/auth/reset-password",pathname:"/auth/reset-password",bundlePath:"",filename:""},components:{App:u.default,Document:l()},userland:r})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,163,209,450,664,201,675,597,102],()=>__webpack_exec__(4784));module.exports=s})();