(()=>{var e={};e.id=35,e.ids=[35,888,660],e.modules={6684:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>S,default:()=>b,getServerSideProps:()=>v,getStaticPaths:()=>j,getStaticProps:()=>y,reportWebVitals:()=>P,routeModule:()=>k,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>q,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>I,unstable_getStaticProps:()=>N});var r={};s.r(r),s.d(r,{default:()=>w});var a=s(7093),n=s(5244),i=s(1323),l=s(2899),o=s.n(l),u=s(3414),d=s(997),c=s(6689),p=s(1163),h=s(1664),m=s.n(h),x=s(2080),f=s(8473),g=s(8316);function w(){let[e,t]=(0,c.useState)(""),[s,r]=(0,c.useState)(""),[a,n]=(0,c.useState)(""),[i,l]=(0,c.useState)(!1),[o,u]=(0,c.useState)(null),[h,x]=(0,c.useState)(!1),w=(0,p.useRouter)(),{updatePassword:b}=(0,f.a)(),y=async t=>{if(t.preventDefault(),l(!0),u(null),x(!1),e!==s){u("Passwords do not match"),l(!1);return}try{a&&g.O.auth.setSession(a);let{error:t}=await b(e);if(t)throw t;x(!0),document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(()=>{w.push("/auth/signin")},3e3)}catch(e){console.error("Error updating password:",e),u(e.message||"Failed to update password")}finally{l(!1)}};return(0,d.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Reset Your Password"}),d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please enter your new password below."}),o&&d.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:o}),h&&d.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Password updated successfully! Redirecting to sign in..."}),(0,d.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[d.jsx("input",{type:"hidden",name:"access_token",value:a}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),d.jsx("input",{type:"password",id:"new_password",value:e,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),d.jsx("input",{type:"password",id:"confirm_password",value:s,onChange:e=>r(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),d.jsx("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold",disabled:i||!a,children:i?"Updating...":"Update Password"})]}),d.jsx("div",{className:"mt-4 text-center text-sm",children:d.jsx(m(),{href:"/auth/signin",children:d.jsx("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Sign In"})})})]})}w.getLayout=function(e){return d.jsx(x.Z,{title:"Reset Password - Guestify",children:e})};let b=(0,i.l)(r,"default"),y=(0,i.l)(r,"getStaticProps"),j=(0,i.l)(r,"getStaticPaths"),v=(0,i.l)(r,"getServerSideProps"),S=(0,i.l)(r,"config"),P=(0,i.l)(r,"reportWebVitals"),N=(0,i.l)(r,"unstable_getStaticProps"),I=(0,i.l)(r,"unstable_getStaticPaths"),_=(0,i.l)(r,"unstable_getStaticParams"),C=(0,i.l)(r,"unstable_getServerProps"),q=(0,i.l)(r,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/auth/reset-password",pathname:"/auth/reset-password",bundlePath:"",filename:""},components:{App:u.default,Document:o()},userland:r})},2080:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(997),a=s(968),n=s.n(a),i=s(1664),l=s.n(i),o=s(5675),u=s.n(o),d=s(8473);function c({children:e,title:t="Guestify - Auth"}){let{user:s}=(0,d.a)();return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,r.jsxs)(n(),{children:[r.jsx("title",{children:t}),r.jsx("meta",{name:"description",content:"Guestify - Authentication"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[r.jsx("div",{className:"flex items-center",children:r.jsx(u(),{src:"/images/guestify_logo.png",alt:"Guestify",width:32,height:32,className:"h-8 w-auto mr-2"})}),r.jsx("nav",{children:s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(l(),{href:"/host/dashboard",children:r.jsx("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),r.jsx(l(),{href:"/auth/logout",children:r.jsx("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Logout"})})]})})]})}),r.jsx("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow",children:e}),r.jsx("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:r.jsx("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},8473:(e,t,s)=>{"use strict";s.d(t,{H:()=>o,a:()=>u});var r=s(997),a=s(6689),n=s(1163),i=s(8316);let l=(0,a.createContext)();function o({children:e}){let[t,s]=(0,a.useState)(null),[o,u]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),p=(0,n.useRouter)(),h=async(e,t)=>{try{let{data:s,error:r}=await i.O.auth.signInWithPassword({email:e,password:t});if(r)throw r;return{user:s.user,error:null}}catch(e){return{user:null,error:e}}},m=async(e,t,s)=>{try{let{data:r,error:a}=await i.O.auth.signUp({email:e,password:t,options:{data:s}});if(a)throw a;return r.user&&await i.O.from("profiles").insert([{id:r.user.id,...s}]),{user:r.user,error:null}}catch(e){return{user:null,error:e}}},x=async()=>{await i.O.auth.signOut(),p.push("/auth/signin")},f=async e=>{try{let{data:t,error:s}=await i.O.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`});if(s)throw s;return{data:t,error:null}}catch(e){return{data:null,error:e}}},g=async e=>{try{let{data:t,error:s}=await i.O.auth.updateUser({password:e});if(s)throw s;return{user:t.user,error:null}}catch(e){return{user:null,error:e}}},w=async e=>{try{let{data:s,error:r}=await i.O.from("profiles").update(e).eq("id",t.id);if(r)throw r;return u({...o,...e}),{profile:s,error:null}}catch(e){return{profile:null,error:e}}};return r.jsx(l.Provider,{value:{user:t,profile:o,loading:d,signIn:h,signUp:m,signOut:x,resetPassword:f,updatePassword:g,updateProfile:w},children:e})}let u=()=>(0,a.useContext)(l)},5026:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i,j:()=>l});var r=s(997),a=s(6689);let n=(0,a.createContext)();function i({children:e}){let[t,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(null);return r.jsx(n.Provider,{value:{cart:t,propertyId:i,setPropertyId:l,addToCart:e=>{let r=t.findIndex(t=>t.productId===e.productId&&t.propertyId===e.propertyId);if(r>=0){let a=[...t];a[r].quantity+=e.quantity,s(a)}else s([...t,e]);i||l(e.propertyId)},updateCartItem:(e,r,a)=>{s(t.map(t=>t.productId===e&&t.propertyId===r?{...t,quantity:a}:t))},removeFromCart:(e,r)=>{s(t.filter(t=>!(t.productId===e&&t.propertyId===r)))},clearCart:()=>{s([])},getCartTotal:()=>t.reduce((e,t)=>e+t.price*t.quantity,0),getCartCount:()=>t.reduce((e,t)=>e+t.quantity,0)},children:e})}let l=()=>(0,a.useContext)(n)},8316:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});let r=require("@supabase/supabase-js"),a=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw";n||console.warn("Missing Supabase key");let i=(0,r.createClient)(a,n)},3414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(997),a=s(968),n=s.n(a),i=s(8473),l=s(5026);s(9605);let o=function({Component:e,pageProps:t}){let s=e.getLayout||(e=>e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"}),r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"})]}),r.jsx(i.H,{children:r.jsx(l.Z,{children:s(r.jsx(e,{...t}))})})]})}},9605:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[429,163,301,637],()=>s(6684));module.exports=r})();