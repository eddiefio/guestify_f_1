(()=>{var e={};e.id=202,e.ids=[202,888,660],e.modules={9285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>j,default:()=>f,getServerSideProps:()=>g,getStaticPaths:()=>b,getStaticProps:()=>w,reportWebVitals:()=>y,routeModule:()=>C,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>v});var r={};s.r(r),s.d(r,{default:()=>h});var a=s(7093),l=s(5244),n=s(1323),i=s(2899),o=s.n(i),d=s(3414),c=s(997),u=s(6689),p=s(1163),m=s(5621),x=s(8473);function h(){let{user:e,profile:t,updateProfile:s,updatePassword:r}=(0,x.a)(),[a,l]=(0,u.useState)({name:"",phone:""}),[n,i]=(0,u.useState)({old_password:"",new_password:"",confirm_password:""}),[o,d]=(0,u.useState)(!1),[m,h]=(0,u.useState)(!1),[f,w]=(0,u.useState)(null),[b,g]=(0,u.useState)(null),[j,y]=(0,u.useState)(null),[v,N]=(0,u.useState)(null);(0,p.useRouter)();let S=e=>{let{name:t,value:s}=e.target;l({...a,[t]:s})},P=e=>{let{name:t,value:s}=e.target;i({...n,[t]:s})},_=async e=>{e.preventDefault(),d(!0),y(null),w(null);try{let{error:e}=await s(a);if(e)throw e;w("Profile updated successfully.")}catch(e){console.error("Error updating profile:",e),y(e.message||"Failed to update profile")}finally{d(!1)}},C=async t=>{if(t.preventDefault(),h(!0),N(null),g(null),n.new_password!==n.confirm_password){N("New passwords do not match"),h(!1);return}try{let{data:t,error:s}=await signIn(e.email,n.old_password);if(s)throw Error("Current password is incorrect");let{error:a}=await r(n.new_password);if(a)throw a;g("Password updated successfully."),i({old_password:"",new_password:"",confirm_password:""})}catch(e){console.error("Error updating password:",e),N(e.message||"Failed to update password")}finally{h(!1)}};return e&&t?(0,c.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-md shadow mt-10",children:[f&&c.jsx("div",{className:"mb-6 p-3 bg-green-100 text-green-800 rounded",children:f}),j&&c.jsx("div",{className:"mb-6 p-3 bg-red-100 text-red-800 rounded",children:j}),c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"User Profile"}),(0,c.jsxs)("div",{className:"mb-10",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Personal Information"}),(0,c.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),c.jsx("input",{type:"email",value:e.email,className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),c.jsx("input",{type:"text",value:t.country||"",className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),c.jsx("input",{type:"text",name:"name",value:a.name,onChange:S,className:"w-full border rounded px-3 py-2",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),c.jsx("input",{type:"text",name:"phone",value:a.phone,onChange:S,className:"w-full border rounded px-3 py-2"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:o,children:o?"Saving...":"Save"})})]})]}),(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Change Password"}),b&&c.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded",children:b}),v&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-800 rounded",children:v}),(0,c.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Old Password"}),c.jsx("input",{type:"password",name:"old_password",value:n.old_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"Old Password",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),c.jsx("input",{type:"password",name:"new_password",value:n.new_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"New Password",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),c.jsx("input",{type:"password",name:"confirm_password",value:n.confirm_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"Confirm New Password",required:!0})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:m,children:m?"Updating...":"Change Password"})})]})]})]}):c.jsx("div",{className:"text-center py-8",children:c.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})})}h.getLayout=function(e){return c.jsx(m.Z,{title:"Profile - Guestify",children:e})};let f=(0,n.l)(r,"default"),w=(0,n.l)(r,"getStaticProps"),b=(0,n.l)(r,"getStaticPaths"),g=(0,n.l)(r,"getServerSideProps"),j=(0,n.l)(r,"config"),y=(0,n.l)(r,"reportWebVitals"),v=(0,n.l)(r,"unstable_getStaticProps"),N=(0,n.l)(r,"unstable_getStaticPaths"),S=(0,n.l)(r,"unstable_getStaticParams"),P=(0,n.l)(r,"unstable_getServerProps"),_=(0,n.l)(r,"unstable_getServerSideProps"),C=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/host/profile",pathname:"/host/profile",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:r})},5621:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(997),a=s(968),l=s.n(a),n=s(1664),i=s.n(n),o=s(5675),d=s.n(o);s(1163);var c=s(8473);function u({children:e,title:t="Guestify"}){let{user:s,signOut:a}=(0,c.a)();return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,r.jsxs)(l(),{children:[r.jsx("title",{children:t}),r.jsx("meta",{name:"description",content:"Guestify - Food service for Airbnb hosts"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[r.jsx("div",{className:"flex items-center",children:s?r.jsx(i(),{href:"/host/dashboard",children:r.jsx("span",{className:"cursor-pointer",children:r.jsx(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}):r.jsx("span",{children:r.jsx(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}),r.jsx("nav",{className:"flex items-center",children:s?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i(),{href:"/host/dashboard",children:r.jsx("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),r.jsx("button",{onClick:a,className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base bg-transparent border-none cursor-pointer",children:"Logout"}),r.jsx(i(),{href:"/host/profile",children:r.jsx("span",{className:"ml-2 cursor-pointer",children:r.jsx("div",{className:"h-8 w-8 rounded-full bg-white text-[#5e2bff] flex items-center justify-center",children:r.jsx("i",{className:"fas fa-smile"})})})})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(i(),{href:"/auth/signin",children:r.jsx("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Login"})}),r.jsx(i(),{href:"/auth/signup",children:r.jsx("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Signup"})})]})})]})}),r.jsx("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow w-full",children:e}),r.jsx("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:r.jsx("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},8473:(e,t,s)=>{"use strict";s.d(t,{H:()=>o,a:()=>d});var r=s(997),a=s(6689),l=s(1163),n=s(8316);let i=(0,a.createContext)();function o({children:e}){let[t,s]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),p=(0,l.useRouter)(),m=async(e,t)=>{try{let{data:s,error:r}=await n.O.auth.signInWithPassword({email:e,password:t});if(r)throw r;return{user:s.user,error:null}}catch(e){return{user:null,error:e}}},x=async(e,t,s)=>{try{let{data:r,error:a}=await n.O.auth.signUp({email:e,password:t,options:{data:s}});if(a)throw a;return r.user&&await n.O.from("profiles").insert([{id:r.user.id,...s}]),{user:r.user,error:null}}catch(e){return{user:null,error:e}}},h=async()=>{await n.O.auth.signOut(),p.push("/auth/signin")},f=async e=>{try{let{data:t,error:s}=await n.O.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`});if(s)throw s;return{data:t,error:null}}catch(e){return{data:null,error:e}}},w=async e=>{try{let{data:t,error:s}=await n.O.auth.updateUser({password:e});if(s)throw s;return{user:t.user,error:null}}catch(e){return{user:null,error:e}}},b=async e=>{try{let{data:s,error:r}=await n.O.from("profiles").update(e).eq("id",t.id);if(r)throw r;return d({...o,...e}),{profile:s,error:null}}catch(e){return{profile:null,error:e}}};return r.jsx(i.Provider,{value:{user:t,profile:o,loading:c,signIn:m,signUp:x,signOut:h,resetPassword:f,updatePassword:w,updateProfile:b},children:e})}let d=()=>(0,a.useContext)(i)},5026:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n,j:()=>i});var r=s(997),a=s(6689);let l=(0,a.createContext)();function n({children:e}){let[t,s]=(0,a.useState)([]),[n,i]=(0,a.useState)(null);return r.jsx(l.Provider,{value:{cart:t,propertyId:n,setPropertyId:i,addToCart:e=>{let r=t.findIndex(t=>t.productId===e.productId&&t.propertyId===e.propertyId);if(r>=0){let a=[...t];a[r].quantity+=e.quantity,s(a)}else s([...t,e]);n||i(e.propertyId)},updateCartItem:(e,r,a)=>{s(t.map(t=>t.productId===e&&t.propertyId===r?{...t,quantity:a}:t))},removeFromCart:(e,r)=>{s(t.filter(t=>!(t.productId===e&&t.propertyId===r)))},clearCart:()=>{s([])},getCartTotal:()=>t.reduce((e,t)=>e+t.price*t.quantity,0),getCartCount:()=>t.reduce((e,t)=>e+t.quantity,0)},children:e})}let i=()=>(0,a.useContext)(l)},8316:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});let r=require("@supabase/supabase-js"),a=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",l=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw";l||console.warn("Missing Supabase key");let n=(0,r.createClient)(a,l)},3414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(997),a=s(968),l=s.n(a),n=s(8473),i=s(5026);s(9605);let o=function({Component:e,pageProps:t}){let s=e.getLayout||(e=>e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"}),r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"})]}),r.jsx(n.H,{children:r.jsx(i.Z,{children:s(r.jsx(e,{...t}))})})]})}},9605:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[429,163,301,637],()=>s(9285));module.exports=r})();