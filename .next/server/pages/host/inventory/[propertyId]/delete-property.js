"use strict";(()=>{var e={};e.id=869,e.ids=[869,888,660],e.modules={4902:(e,t,r)=>{r.r(t),r.d(t,{config:()=>j,default:()=>b,getServerSideProps:()=>v,getStaticPaths:()=>y,getStaticProps:()=>g,reportWebVitals:()=>N,routeModule:()=>O,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>_});var a={};r.r(a),r.d(a,{default:()=>DeleteProduct});var s=r(7093),o=r(5244),n=r(1323),i=r(9209),l=r.n(i),d=r(9597),c=r(997),u=r(6689),p=r(1163),x=r(1664),m=r.n(x),h=r(5675),f=r.n(h);function DeleteProduct(){let[e,t]=(0,u.useState)(null),[r,a]=(0,u.useState)(!0),[s,o]=(0,u.useState)(!1),[n,i]=(0,u.useState)(null),l=(0,p.useRouter)(),{propertyId:d,productId:x}=l.query;(0,u.useEffect)(()=>{d&&x&&fetchProduct();async function fetchProduct(){try{a(!0);let{data:e,error:r}=await Object(function(){var e=Error("Cannot find module '../../../../../lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("products").select("*").eq("id",x).single();if(r)throw r;let{data:s,error:o}=await Object(function(){var e=Error("Cannot find module '../../../../../lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("inventory").select("*").eq("apartment_id",d).eq("product_id",x).single();if(o)throw o;t({...e,price:s.price,quantity:s.quantity})}catch(e){console.error("Error fetching product:",e),i("Failed to load product data")}finally{a(!1)}}},[d,x]);let handleDelete=async()=>{try{o(!0);let{error:e}=await Object(function(){var e=Error("Cannot find module '../../../../../lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("inventory").delete().eq("apartment_id",d).eq("product_id",x);if(e)throw e;l.push(`/host/inventory/${d}`)}catch(e){console.error("Error deleting product:",e),i("Failed to delete product"),o(!1)}};return r?c.jsx("div",{className:"text-center py-8",children:c.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):n?(0,c.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[c.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:n}),c.jsx(m(),{href:`/host/inventory/${d}`,children:c.jsx("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Inventory"})})]}):(0,c.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md mt-10",children:[c.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Confirm Product Deletion"}),e&&(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[e.image_url?c.jsx("div",{className:"flex-shrink-0",children:c.jsx(f(),{src:e.image_url,alt:e.name,width:80,height:80,className:"rounded object-cover"})}):c.jsx("div",{className:"flex-shrink-0 w-20 h-20 bg-gray-200 rounded flex items-center justify-center",children:c.jsx("i",{className:"fas fa-image text-gray-400"})}),(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"font-semibold text-lg",children:e.name}),(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["â‚¬",parseFloat(e.price).toFixed(2)," \xb7 ",e.quantity," in stock"]}),e.category&&c.jsx("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded mt-1",children:e.category})]})]}),c.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this product from your inventory?"}),c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,c.jsxs)("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-400"})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-yellow-700",children:"This will remove the product from this property's inventory only. The product data will still be available for use in other properties."})})]})}),(0,c.jsxs)("div",{className:"flex space-x-4",children:[c.jsx(m(),{href:`/host/inventory/${d}`,children:c.jsx("span",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400 transition cursor-pointer",children:"Cancel"})}),c.jsx("button",{onClick:handleDelete,disabled:s,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition",children:s?"Deleting...":"Delete"})]})]})]})}(function(){var e=Error("Cannot find module '../../../../../components/layout/Layout'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '../../../../../lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}(),DeleteProduct.getLayout=function(e){return c.jsx(Object(function(){var e=Error("Cannot find module '../../../../../components/layout/Layout'");throw e.code="MODULE_NOT_FOUND",e}()),{title:"Delete Product - Guestify",children:e})};let b=(0,n.l)(a,"default"),g=(0,n.l)(a,"getStaticProps"),y=(0,n.l)(a,"getStaticPaths"),v=(0,n.l)(a,"getServerSideProps"),j=(0,n.l)(a,"config"),N=(0,n.l)(a,"reportWebVitals"),_=(0,n.l)(a,"unstable_getStaticProps"),w=(0,n.l)(a,"unstable_getStaticPaths"),P=(0,n.l)(a,"unstable_getStaticParams"),S=(0,n.l)(a,"unstable_getServerProps"),D=(0,n.l)(a,"unstable_getServerSideProps"),O=new s.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/host/inventory/[propertyId]/delete-property",pathname:"/host/inventory/[propertyId]/delete-property",bundlePath:"",filename:""},components:{App:d.default,Document:l()},userland:a})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,163,209,450,664,201,675,597],()=>__webpack_exec__(4902));module.exports=r})();