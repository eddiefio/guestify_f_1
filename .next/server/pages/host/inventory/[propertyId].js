"use strict";(()=>{var e={};e.id=884,e.ids=[884,888,660],e.modules={4078:(e,t,r)=>{r.r(t),r.d(t,{config:()=>_,default:()=>b,getServerSideProps:()=>S,getStaticPaths:()=>N,getStaticProps:()=>j,reportWebVitals:()=>P,routeModule:()=>A,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>I,unstable_getStaticPaths:()=>q,unstable_getStaticProps:()=>w});var s={};r.r(s),r.d(s,{default:()=>Inventory});var a=r(7093),i=r(5244),n=r(1323),l=r(9209),d=r.n(l),o=r(9597),c=r(997),p=r(6689),u=r(1163),x=r(1664),m=r.n(x),h=r(5675),y=r.n(h),f=r(9430),g=r(5240),v=r(4478);function Inventory(){let[e,t]=(0,p.useState)([]),[r,s]=(0,p.useState)(""),[a,i]=(0,p.useState)(!0),[n,l]=(0,p.useState)(null),[d,o]=(0,p.useState)(""),x=(0,u.useRouter)(),{propertyId:h}=x.query;(0,p.useEffect)(()=>{h&&fetchData();async function fetchData(){try{i(!0);let{data:e,error:r}=await v.O.from("apartments").select("name").eq("id",h).single();if(r)throw r;s(e.name);let{data:a,error:n}=await v.O.from("inventory").select(`
            id,
            quantity,
            price,
            product_id,
            products ( id, name, barcode, image_url, description, category )
          `).eq("apartment_id",h);if(n)throw n;t(a||[])}catch(e){console.error("Error fetching inventory:",e),l("Failed to load inventory")}finally{i(!1)}}},[h]);let f=e.filter(e=>e.products?.name?.toLowerCase().includes(d.toLowerCase()));return(0,c.jsxs)("div",{children:[c.jsx(g.Z,{propertyId:h,activeTab:"inventory",propertyName:r}),(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800",children:"Inventory"}),c.jsx(m(),{href:`/host/inventory/${h}/add-product`,children:c.jsx("span",{className:"bg-[#fad02f] text-black px-3 py-1 rounded-full text-sm hover:opacity-90 transition font-semibold cursor-pointer",children:"+ Add Product"})})]}),c.jsx("div",{className:"mb-4",children:c.jsx("input",{type:"text",id:"searchInput",placeholder:"Search products by name...",className:"w-full border px-3 py-2 rounded",value:d,onChange:e=>o(e.target.value)})}),a?c.jsx("div",{className:"text-center py-8",children:c.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):n?c.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:n}):c.jsx("div",{className:"overflow-x-auto w-full bg-white shadow-md rounded-md text-sm",children:(0,c.jsxs)("table",{id:"inventoryTable",className:"table-auto w-full min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-100",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Image"}),c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Name"}),c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Category"}),c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Price"}),c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Qt."}),c.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:f.length>0?f.map(e=>(0,c.jsxs)("tr",{children:[c.jsx("td",{className:"px-2 py-2",children:e.products?.image_url?c.jsx("div",{className:"relative w-14 h-14",children:c.jsx(y(),{src:e.products.image_url,alt:e.products.name||"Product image",layout:"fill",objectFit:"cover",className:"rounded"})}):c.jsx("span",{className:"text-gray-400",children:"No Image"})}),c.jsx("td",{className:"px-2 py-2 border",children:e.products?.name||"N/A"}),c.jsx("td",{className:"px-2 py-2 border",children:e.products?.category||"No Category"}),(0,c.jsxs)("td",{className:"px-2 py-2 border",children:["EUR ",Number(e.price).toFixed(2)]}),c.jsx("td",{className:"px-2 py-2 border text-center",children:e.quantity}),(0,c.jsxs)("td",{className:"px-2 py-2 border text-center",children:[c.jsx(m(),{href:`/host/inventory/${h}/edit-product/${e.products?.id}`,children:c.jsx("span",{className:"text-blue-500 hover:underline mr-2 cursor-pointer",children:"Edit"})}),c.jsx(m(),{href:`/host/inventory/${h}/delete-product/${e.products?.id}`,children:c.jsx("span",{className:"text-red-500 hover:underline cursor-pointer",children:"Delete"})})]})]},e.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-2 py-2 text-center text-gray-500",children:"No products in inventory"})})})]})})]})}Inventory.getLayout=function(e){return c.jsx(f.Z,{title:"Inventory - Guestify",children:e})};let b=(0,n.l)(s,"default"),j=(0,n.l)(s,"getStaticProps"),N=(0,n.l)(s,"getStaticPaths"),S=(0,n.l)(s,"getServerSideProps"),_=(0,n.l)(s,"config"),P=(0,n.l)(s,"reportWebVitals"),w=(0,n.l)(s,"unstable_getStaticProps"),q=(0,n.l)(s,"unstable_getStaticPaths"),I=(0,n.l)(s,"unstable_getStaticParams"),C=(0,n.l)(s,"unstable_getServerProps"),k=(0,n.l)(s,"unstable_getServerSideProps"),A=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/host/inventory/[propertyId]",pathname:"/host/inventory/[propertyId]",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:s})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,163,209,450,664,201,675,597,430,240],()=>__webpack_exec__(4078));module.exports=r})();