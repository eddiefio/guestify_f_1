"use strict";(()=>{var e={};e.id=71,e.ids=[71,888,660],e.modules={7756:(e,t,r)=>{r.r(t),r.d(t,{config:()=>f,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>S,getStaticProps:()=>b,reportWebVitals:()=>P,routeModule:()=>C,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>_});var s={};r.r(s),r.d(s,{default:()=>ConnectStripe});var n=r(7093),a=r(5244),o=r(1323),i=r(9209),c=r.n(i),l=r(9597),u=r(997),d=r(6689),p=r(1163),x=r(9430),m=r(7016);function ConnectStripe(){let[e,t]=(0,d.useState)(!1),[r,s]=(0,d.useState)(null),n=(0,p.useRouter)(),{user:a}=(0,m.a)(),handleConnect=async()=>{t(!0),s(null);try{let e=await fetch("/api/stripe/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a?.id})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to connect with Stripe");if(t.url)window.location.href=t.url;else throw Error("No redirect URL returned")}catch(e){console.error("Error connecting to Stripe:",e),s(e.message||"An error occurred connecting to Stripe")}finally{t(!1)}};return(0,u.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10 text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Connect Your Stripe Account"}),u.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"To receive payments, please connect or create your Stripe account."}),r&&u.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:r}),u.jsx("button",{onClick:handleConnect,disabled:e,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition font-semibold",children:e?"Connecting...":"Connect Stripe"}),(0,u.jsxs)("div",{className:"mt-4",children:[u.jsx("p",{className:"text-xs text-gray-400",children:"You can skip this step and connect later from your dashboard."}),u.jsx("button",{onClick:()=>{n.push("/host/dashboard")},className:"text-gray-500 underline mt-2 text-sm",children:"Skip for now"})]})]})}ConnectStripe.getLayout=function(e){return u.jsx(x.Z,{title:"Connect Stripe - Guestify",children:e})};let h=(0,o.l)(s,"default"),b=(0,o.l)(s,"getStaticProps"),S=(0,o.l)(s,"getStaticPaths"),g=(0,o.l)(s,"getServerSideProps"),f=(0,o.l)(s,"config"),P=(0,o.l)(s,"reportWebVitals"),_=(0,o.l)(s,"unstable_getStaticProps"),v=(0,o.l)(s,"unstable_getStaticPaths"),w=(0,o.l)(s,"unstable_getStaticParams"),j=(0,o.l)(s,"unstable_getServerProps"),y=(0,o.l)(s,"unstable_getServerSideProps"),C=new n.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/host/connect-stripe",pathname:"/host/connect-stripe",bundlePath:"",filename:""},components:{App:l.default,Document:c()},userland:s})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,163,209,450,664,201,675,597,430],()=>__webpack_exec__(7756));module.exports=r})();