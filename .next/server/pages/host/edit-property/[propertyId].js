"use strict";(()=>{var e={};e.id=703,e.ids=[703,888,660],e.modules={7367:(e,t,r)=>{r.r(t),r.d(t,{config:()=>j,default:()=>b,getServerSideProps:()=>v,getStaticPaths:()=>g,getStaticProps:()=>f,reportWebVitals:()=>S,routeModule:()=>q,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>_});var a={};r.r(a),r.d(a,{default:()=>EditProperty});var s=r(7093),n=r(5244),o=r(1323),l=r(9209),i=r.n(l),d=r(9597),u=r(997),c=r(6689),p=r(1163),m=r(1664),x=r.n(m),h=r(9430),y=r(4478);function EditProperty(){let[e,t]=(0,c.useState)({rental_name:"",address:"",city:"",state:"",zip:"",country:""}),[r,a]=(0,c.useState)(!0),[s,n]=(0,c.useState)(!1),[o,l]=(0,c.useState)(null),i=(0,p.useRouter)(),{propertyId:d}=i.query;(0,c.useEffect)(()=>{d&&fetchProperty();async function fetchProperty(){try{let{data:e,error:r}=await y.O.from("apartments").select("*").eq("id",d).single();if(r)throw r;t({rental_name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",zip:e.zip||"",country:e.country||""})}catch(e){console.error("Error fetching property:",e),l("Could not load property data")}finally{a(!1)}}},[d]);let handleChange=e=>{let{name:r,value:a}=e.target;t(e=>({...e,[r]:a}))},handleSubmit=async t=>{t.preventDefault(),n(!0);try{let{error:t}=await y.O.from("apartments").update({name:e.rental_name,address:e.address,city:e.city,state:e.state,zip:e.zip,country:e.country}).eq("id",d);if(t)throw t;i.push("/host/dashboard")}catch(e){console.error("Error updating property:",e),l("Failed to update property"),n(!1)}};return r?u.jsx("div",{className:"text-center py-8",children:u.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):(0,u.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Property"}),o&&u.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:o}),(0,u.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rental Name"}),u.jsx("input",{type:"text",name:"rental_name",value:e.rental_name,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),u.jsx("input",{type:"text",name:"address",value:e.address,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),u.jsx("input",{type:"text",name:"city",value:e.city,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),u.jsx("input",{type:"text",name:"state",value:e.state,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),u.jsx("input",{type:"text",name:"zip",value:e.zip,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),u.jsx(Object(function(){var e=Error("Cannot find module '../../../components/CountrySelect'");throw e.code="MODULE_NOT_FOUND",e}()),{id:"country",name:"country",value:e.country,onChange:handleChange,className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[u.jsx(x(),{href:"/host/dashboard",children:u.jsx("span",{className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition cursor-pointer",children:"Cancel"})}),u.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",children:s?"Saving...":"Save Changes"})]})]})]})}(function(){var e=Error("Cannot find module '../../../components/CountrySelect'");throw e.code="MODULE_NOT_FOUND",e})(),EditProperty.getLayout=function(e){return u.jsx(h.Z,{title:"Edit Property - Guestify",children:e})};let b=(0,o.l)(a,"default"),f=(0,o.l)(a,"getStaticProps"),g=(0,o.l)(a,"getStaticPaths"),v=(0,o.l)(a,"getServerSideProps"),j=(0,o.l)(a,"config"),S=(0,o.l)(a,"reportWebVitals"),_=(0,o.l)(a,"unstable_getStaticProps"),P=(0,o.l)(a,"unstable_getStaticPaths"),N=(0,o.l)(a,"unstable_getStaticParams"),C=(0,o.l)(a,"unstable_getServerProps"),w=(0,o.l)(a,"unstable_getServerSideProps"),q=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/host/edit-property/[propertyId]",pathname:"/host/edit-property/[propertyId]",bundlePath:"",filename:""},components:{App:d.default,Document:i()},userland:a})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,163,209,450,664,201,675,597,430],()=>__webpack_exec__(7367));module.exports=r})();