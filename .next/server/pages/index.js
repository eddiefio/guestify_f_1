(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},9601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>m,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>f,reportWebVitals:()=>P,routeModule:()=>b,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>x,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>S});var s={};r.r(s),r.d(s,{default:()=>d,getServerSideProps:()=>c});var n=r(7093),i=r(5244),a=r(1323),o=r(2899),u=r.n(o),l=r(3414);let c=async()=>({redirect:{destination:"/auth/signin",permanent:!1}});function d(){return null}let p=(0,a.l)(s,"default"),f=(0,a.l)(s,"getStaticProps"),h=(0,a.l)(s,"getStaticPaths"),g=(0,a.l)(s,"getServerSideProps"),m=(0,a.l)(s,"config"),P=(0,a.l)(s,"reportWebVitals"),S=(0,a.l)(s,"unstable_getStaticProps"),y=(0,a.l)(s,"unstable_getStaticPaths"),x=(0,a.l)(s,"unstable_getStaticParams"),w=(0,a.l)(s,"unstable_getServerProps"),I=(0,a.l)(s,"unstable_getServerSideProps"),b=new n.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:l.default,Document:u()},userland:s})},8473:(e,t,r)=>{"use strict";r.d(t,{H:()=>u,a:()=>l});var s=r(997),n=r(6689),i=r(1163),a=r(2732);let o=(0,n.createContext)();function u({children:e}){let[t,r]=(0,n.useState)(null),[u,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[p,f]=(0,n.useState)(!1),h=(0,i.useRouter)(),g=(0,n.useCallback)(async e=>{if(!e)return console.log("fetchUserProfile: No userId provided"),null;try{return console.log("Fetching user profile for:",e),await m(e)}catch(e){return console.error("Exception in fetchUserProfile:",e),null}},[]),m=async e=>{try{let{data:t,error:r}=await a.OQ.from("profiles").select("*").eq("id",e).single();if(r)return console.error("Error fetching profile from Supabase:",r),null;return console.log("Profile fetched successfully from Supabase:",t?.id),t}catch(e){return console.error("Unexpected error fetching profile:",e),null}},P=async(e,t)=>{try{console.log("Signing in user:",e);let{data:s,error:n}=await (0,a.q4)(()=>a.OQ.auth.signInWithPassword({email:e,password:t}));if(n)throw console.error("Sign in error:",n),n;if(console.log("Sign in successful:",s.user?.id),s.user){r(s.user);let e=await g(s.user.id);l(e)}return{user:s.user,error:null}}catch(e){return console.error("Error in signIn function:",e),{user:null,error:e}}},S=async(e,t,s)=>{try{let{data:n,error:i}=await (0,a.q4)(()=>a.OQ.auth.signUp({email:e,password:t,options:{data:s}}));if(i)throw i;return n.user&&(await (0,a.q4)(()=>a.OQ.from("profiles").insert([{id:n.user.id,...s}])),r(n.user),l({id:n.user.id,...s})),{user:n.user,error:null}}catch(e){return{user:null,error:e}}},y=async()=>{try{await a.OQ.auth.signOut(),r(null),l(null),h.push("/auth/signin")}catch(e){console.error("Error signing out:",e)}},x=async e=>{try{let{data:t,error:r}=await (0,a.q4)(()=>a.OQ.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`}));if(r)throw r;return{data:t,error:null}}catch(e){return{data:null,error:e}}},w=async e=>{try{let{data:t,error:r}=await (0,a.q4)(()=>a.OQ.auth.updateUser({password:e}));if(r)throw r;return{user:t.user,error:null}}catch(e){return{user:null,error:e}}},I=async e=>{if(!t)return{profile:null,error:Error("User not authenticated")};try{let{data:r,error:s}=await (0,a.q4)(()=>a.OQ.from("profiles").update(e).eq("id",t.id));if(s)throw s;let n={...u,...e};return l(n),{profile:r,error:null}}catch(e){return{profile:null,error:e}}};return s.jsx(o.Provider,{value:{user:t,profile:u,loading:c,authInitialized:p,signIn:P,signUp:S,signOut:y,resetPassword:x,updatePassword:w,updateProfile:I,isAuthenticated:()=>!!t},children:e})}let l=()=>(0,n.useContext)(o)},5026:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,j:()=>o});var s=r(997),n=r(6689);let i=(0,n.createContext)();function a({children:e}){let[t,r]=(0,n.useState)([]),[a,o]=(0,n.useState)(null);return s.jsx(i.Provider,{value:{cart:t,propertyId:a,setPropertyId:o,addToCart:e=>{let s=t.findIndex(t=>t.productId===e.productId&&t.propertyId===e.propertyId);if(s>=0){let n=[...t];n[s].quantity+=e.quantity,r(n)}else r([...t,e]);a||o(e.propertyId)},updateCartItem:(e,s,n)=>{r(t.map(t=>t.productId===e&&t.propertyId===s?{...t,quantity:n}:t))},removeFromCart:(e,s)=>{r(t.filter(t=>!(t.productId===e&&t.propertyId===s)))},clearCart:()=>{r([])},getCartTotal:()=>t.reduce((e,t)=>e+t.price*t.quantity,0),getCartCount:()=>t.reduce((e,t)=>e+t.quantity,0)},children:e})}let o=()=>(0,n.useContext)(i)},2732:(e,t,r)=>{"use strict";r.d(t,{OQ:()=>a,q4:()=>o});var s=r(2885);let n=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw",a=(0,s.createClient)(n,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"supabase-auth",storage:{getItem:e=>null,setItem:(e,t)=>{},removeItem:e=>{}},cookieOptions:{secure:!0,sameSite:"lax",path:"/"}},global:{headers:{"Cache-Control":"no-store, no-cache, must-revalidate"}}}),o=async(e,t=3,r=1e3)=>{let s,n=0;for(;n<t;)try{return await e()}catch(i){s=i,console.warn(`Operation failed (attempt ${n+1}/${t}):`,i);let e=r*Math.pow(2,n);await new Promise(t=>setTimeout(t,e)),n++}throw s}},3414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(997);r(9605);var n=r(968),i=r.n(n),a=r(6689),o=r(8473),u=r(5026);r(4595);let l=function({Component:e,pageProps:t}){let[r,n]=(0,a.useState)(!1),l=e.getLayout||(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"})]}),s.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),r?s.jsx(o.H,{children:s.jsx(u.Z,{children:l(s.jsx(e,{...t}))})}):s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})]})}},9605:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[429,376,301],()=>r(9601));module.exports=s})();