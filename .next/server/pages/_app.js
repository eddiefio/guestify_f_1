(()=>{var e={};e.id=888,e.ids=[888],e.modules={8473:(e,r,t)=>{"use strict";t.d(r,{H:()=>u,a:()=>l});var s=t(997),i=t(6689),o=t(1163),n=t(2732);let a=(0,i.createContext)();function u({children:e}){let[r,t]=(0,i.useState)(null),[u,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),[p,h]=(0,i.useState)(!1),f=(0,o.useRouter)(),m=(0,i.useCallback)(async e=>{if(!e)return console.log("fetchUserProfile: No userId provided"),null;try{return console.log("Fetching user profile for:",e),await y(e)}catch(e){return console.error("Exception in fetchUserProfile:",e),null}},[]),y=async e=>{try{let{data:r,error:t}=await n.OQ.from("profiles").select("*").eq("id",e).single();if(t)return console.error("Error fetching profile from Supabase:",t),null;return console.log("Profile fetched successfully from Supabase:",r?.id),r}catch(e){return console.error("Unexpected error fetching profile:",e),null}},w=async(e,r)=>{try{console.log("Signing in user:",e);let{data:s,error:i}=await (0,n.q4)(()=>n.OQ.auth.signInWithPassword({email:e,password:r}));if(i)throw console.error("Sign in error:",i),i;if(console.log("Sign in successful:",s.user?.id),s.user){t(s.user);let e=await m(s.user.id);l(e)}return{user:s.user,error:null}}catch(e){return console.error("Error in signIn function:",e),{user:null,error:e}}},x=async(e,r,s)=>{try{let{data:i,error:o}=await (0,n.q4)(()=>n.OQ.auth.signUp({email:e,password:r,options:{data:s}}));if(o)throw o;return i.user&&(await (0,n.q4)(()=>n.OQ.from("profiles").insert([{id:i.user.id,...s}])),t(i.user),l({id:i.user.id,...s})),{user:i.user,error:null}}catch(e){return{user:null,error:e}}},I=async()=>{try{await n.OQ.auth.signOut(),t(null),l(null),f.push("/auth/signin")}catch(e){console.error("Error signing out:",e)}},g=async e=>{try{let{data:r,error:t}=await (0,n.q4)(()=>n.OQ.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`}));if(t)throw t;return{data:r,error:null}}catch(e){return{data:null,error:e}}},j=async e=>{try{let{data:r,error:t}=await (0,n.q4)(()=>n.OQ.auth.updateUser({password:e}));if(t)throw t;return{user:r.user,error:null}}catch(e){return{user:null,error:e}}},q=async e=>{if(!r)return{profile:null,error:Error("User not authenticated")};try{let{data:t,error:s}=await (0,n.q4)(()=>n.OQ.from("profiles").update(e).eq("id",r.id));if(s)throw s;let i={...u,...e};return l(i),{profile:t,error:null}}catch(e){return{profile:null,error:e}}};return s.jsx(a.Provider,{value:{user:r,profile:u,loading:c,authInitialized:p,signIn:w,signUp:x,signOut:I,resetPassword:g,updatePassword:j,updateProfile:q,isAuthenticated:()=>!!r},children:e})}let l=()=>(0,i.useContext)(a)},5026:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n,j:()=>a});var s=t(997),i=t(6689);let o=(0,i.createContext)();function n({children:e}){let[r,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(null);return s.jsx(o.Provider,{value:{cart:r,propertyId:n,setPropertyId:a,addToCart:e=>{let s=r.findIndex(r=>r.productId===e.productId&&r.propertyId===e.propertyId);if(s>=0){let i=[...r];i[s].quantity+=e.quantity,t(i)}else t([...r,e]);n||a(e.propertyId)},updateCartItem:(e,s,i)=>{t(r.map(r=>r.productId===e&&r.propertyId===s?{...r,quantity:i}:r))},removeFromCart:(e,s)=>{t(r.filter(r=>!(r.productId===e&&r.propertyId===s)))},clearCart:()=>{t([])},getCartTotal:()=>r.reduce((e,r)=>e+r.price*r.quantity,0),getCartCount:()=>r.reduce((e,r)=>e+r.quantity,0)},children:e})}let a=()=>(0,i.useContext)(o)},2732:(e,r,t)=>{"use strict";t.d(r,{OQ:()=>n,q4:()=>a});var s=t(2885);let i=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",o=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw",n=(0,s.createClient)(i,o,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"supabase-auth",storage:{getItem:e=>null,setItem:(e,r)=>{},removeItem:e=>{}},cookieOptions:{secure:!0,sameSite:"lax",path:"/"}},global:{headers:{"Cache-Control":"no-store, no-cache, must-revalidate"}}}),a=async(e,r=3,t=1e3)=>{let s,i=0;for(;i<r;)try{return await e()}catch(o){s=o,console.warn(`Operation failed (attempt ${i+1}/${r}):`,o);let e=t*Math.pow(2,i);await new Promise(r=>setTimeout(r,e)),i++}throw s}},3414:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(997);t(9605);var i=t(968),o=t.n(i),n=t(6689),a=t(8473),u=t(5026);t(4595);let l=function({Component:e,pageProps:r}){let[t,i]=(0,n.useState)(!1),l=e.getLayout||(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o(),{children:[s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"})]}),s.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),t?s.jsx(a.H,{children:s.jsx(u.Z,{children:l(s.jsx(e,{...r}))})}):s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})]})}},9605:()=>{},2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[429,376],()=>t(3414));module.exports=s})();