(()=>{var e={};e.id=333,e.ids=[333,888,660],e.modules={2726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>I,default:()=>b,getServerSideProps:()=>N,getStaticPaths:()=>v,getStaticProps:()=>w,reportWebVitals:()=>S,routeModule:()=>O,unstable_getServerProps:()=>q,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>P});var r={};s.r(r),s.d(r,{default:()=>y});var a=s(7093),i=s(5244),l=s(1323),n=s(2899),c=s.n(n),o=s(3414),u=s(997),d=s(6689),x=s(1163),p=s(1664),m=s.n(p),h=s(5675),f=s.n(h),g=s(7706),j=s(5026);function y(){let[e,t]=(0,d.useState)([]),[s,r]=(0,d.useState)(!0),[a,i]=(0,d.useState)(null),{propertyId:l,category:n}=(0,x.useRouter)().query,{addToCart:c,setPropertyId:o}=(0,j.j)(),p=(e,t=1)=>{c({propertyId:e.apartment_id,productId:e.product_id,name:e.products.name,price:parseFloat(e.price),quantity:parseInt(t,10)})};if(!n)return(0,u.jsxs)("div",{className:"h-full flex flex-col justify-center",children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 text-center",children:"Select a category"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 flex-grow",children:[u.jsx(m(),{href:`/guest/menu/${l}?category=Food%20and%20Drinks`,children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow flex flex-col items-center justify-center p-6 hover:shadow-lg transition cursor-pointer",style:{minHeight:"250px"},children:[u.jsx("i",{className:"fas fa-utensils fa-4x text-[#fad02f] mb-3"}),u.jsx("h3",{className:"text-lg font-bold text-[#000000] mb-1",children:"Food and Drinks"}),u.jsx("p",{className:"text-sm text-gray-600 text-center",children:"View all food and drinks."})]})}),u.jsx(m(),{href:`/guest/menu/${l}?category=Articles`,children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow flex flex-col items-center justify-center p-6 hover:shadow-lg transition cursor-pointer",style:{minHeight:"250px"},children:[u.jsx("i",{className:"fas fa-box-open fa-4x text-[#fad02f] mb-3"}),u.jsx("h3",{className:"text-lg font-bold text-[#000000] mb-1",children:"Articles"}),u.jsx("p",{className:"text-sm text-gray-600 text-center",children:"View all articles."})]})})]})]});let h=e.filter(e=>e.products?.category===n);return s?u.jsx("div",{className:"text-center py-8",children:u.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):a?u.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:a}):(0,u.jsxs)("div",{children:[(0,u.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:["Products - ",n]}),u.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.length>0?h.map(e=>(0,u.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex flex-col",children:[u.jsx(m(),{href:`/guest/product/${e.apartment_id}/${e.product_id}?category=${encodeURIComponent(n)}`,children:u.jsx("div",{className:"cursor-pointer",children:e.products?.image_url?u.jsx("div",{className:"relative w-full h-40 mb-2",children:u.jsx(f(),{src:e.products.image_url,alt:e.products.name,layout:"fill",objectFit:"cover",className:"rounded"})}):u.jsx("div",{className:"w-full h-40 bg-gray-100 flex items-center justify-center rounded mb-2",children:u.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})})})}),u.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-800 mb-1",children:e.products?.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Availability: ",e.quantity]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Price: â‚¬",parseFloat(e.price).toFixed(2)]}),u.jsx("div",{className:"mt-auto flex items-center space-x-2",children:(0,u.jsxs)("form",{className:"flex items-center space-x-2 w-full",children:[u.jsx("input",{type:"number",min:"1",max:e.quantity,defaultValue:"1",className:"w-16 border rounded px-2 py-1 text-sm",onChange:e=>{e.target.dataset.quantity=e.target.value}}),u.jsx("button",{type:"button",onClick:t=>{p(e,parseInt(t.target.form[0].dataset.quantity||t.target.form[0].value,10))},className:"bg-[#fad02f] text-black px-3 py-1 rounded-full text-sm hover:bg-[#fad02f]/90 transition flex-grow font-semibold",children:"Add to Cart"})]})})]},e.id)):u.jsx("p",{className:"col-span-2 text-center text-gray-500",children:"No products available in this category."})}),u.jsx("div",{className:"mt-4",children:u.jsx(m(),{href:`/guest/menu/${l}`,children:u.jsx("span",{className:"text-sm text-[#5e2bff] font-semibold underline cursor-pointer",children:"Back to Menu"})})})]})}s(8316),y.getLayout=function(e){return u.jsx(g.Z,{title:"Menu - Guestify",children:e})};let b=(0,l.l)(r,"default"),w=(0,l.l)(r,"getStaticProps"),v=(0,l.l)(r,"getStaticPaths"),N=(0,l.l)(r,"getServerSideProps"),I=(0,l.l)(r,"config"),S=(0,l.l)(r,"reportWebVitals"),P=(0,l.l)(r,"unstable_getStaticProps"),_=(0,l.l)(r,"unstable_getStaticPaths"),C=(0,l.l)(r,"unstable_getStaticParams"),q=(0,l.l)(r,"unstable_getServerProps"),k=(0,l.l)(r,"unstable_getServerSideProps"),O=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/guest/menu/[propertyId]",pathname:"/guest/menu/[propertyId]",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:r})},7706:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(997),a=s(968),i=s.n(a),l=s(1664),n=s.n(l),c=s(5675),o=s.n(c),u=s(5026);function d({children:e,title:t="Guestify - Guest"}){let{getCartCount:s,propertyId:a}=(0,u.j)(),l=s();return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,r.jsxs)(i(),{children:[r.jsx("title",{children:t}),r.jsx("meta",{name:"description",content:"Guestify - Food service for Airbnb guests"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[r.jsx("div",{children:a?r.jsx(n(),{href:`/guest/menu/${a}`,children:r.jsx("span",{className:"cursor-pointer",children:r.jsx(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})})}):r.jsx(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx("div",{className:"relative",children:r.jsx(n(),{href:"/guest/cart",children:(0,r.jsxs)("span",{className:"text-white hover:opacity-80 relative cursor-pointer",children:[r.jsx("i",{className:"fas fa-shopping-cart text-2xl"}),l>0&&r.jsx("span",{className:"absolute top-[-8px] right-[-8px] bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:l})]})})})})]})}),r.jsx("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 w-full flex-grow",children:e}),r.jsx("footer",{className:"bg-[#5e2bff] p-4",children:r.jsx("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},8473:(e,t,s)=>{"use strict";s.d(t,{H:()=>c,a:()=>o});var r=s(997),a=s(6689),i=s(1163),l=s(8316);let n=(0,a.createContext)();function c({children:e}){let[t,s]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0),x=(0,i.useRouter)(),p=async(e,t)=>{try{let{data:s,error:r}=await l.O.auth.signInWithPassword({email:e,password:t});if(r)throw r;return{user:s.user,error:null}}catch(e){return{user:null,error:e}}},m=async(e,t,s)=>{try{let{data:r,error:a}=await l.O.auth.signUp({email:e,password:t,options:{data:s}});if(a)throw a;return r.user&&await l.O.from("profiles").insert([{id:r.user.id,...s}]),{user:r.user,error:null}}catch(e){return{user:null,error:e}}},h=async()=>{await l.O.auth.signOut(),x.push("/auth/signin")},f=async e=>{try{let{data:t,error:s}=await l.O.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`});if(s)throw s;return{data:t,error:null}}catch(e){return{data:null,error:e}}},g=async e=>{try{let{data:t,error:s}=await l.O.auth.updateUser({password:e});if(s)throw s;return{user:t.user,error:null}}catch(e){return{user:null,error:e}}},j=async e=>{try{let{data:s,error:r}=await l.O.from("profiles").update(e).eq("id",t.id);if(r)throw r;return o({...c,...e}),{profile:s,error:null}}catch(e){return{profile:null,error:e}}};return r.jsx(n.Provider,{value:{user:t,profile:c,loading:u,signIn:p,signUp:m,signOut:h,resetPassword:f,updatePassword:g,updateProfile:j},children:e})}let o=()=>(0,a.useContext)(n)},5026:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l,j:()=>n});var r=s(997),a=s(6689);let i=(0,a.createContext)();function l({children:e}){let[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(null);return r.jsx(i.Provider,{value:{cart:t,propertyId:l,setPropertyId:n,addToCart:e=>{let r=t.findIndex(t=>t.productId===e.productId&&t.propertyId===e.propertyId);if(r>=0){let a=[...t];a[r].quantity+=e.quantity,s(a)}else s([...t,e]);l||n(e.propertyId)},updateCartItem:(e,r,a)=>{s(t.map(t=>t.productId===e&&t.propertyId===r?{...t,quantity:a}:t))},removeFromCart:(e,r)=>{s(t.filter(t=>!(t.productId===e&&t.propertyId===r)))},clearCart:()=>{s([])},getCartTotal:()=>t.reduce((e,t)=>e+t.price*t.quantity,0),getCartCount:()=>t.reduce((e,t)=>e+t.quantity,0)},children:e})}let n=()=>(0,a.useContext)(i)},8316:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});let r=require("@supabase/supabase-js"),a=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw";i||console.warn("Missing Supabase key");let l=(0,r.createClient)(a,i)},3414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(997),a=s(968),i=s.n(a),l=s(8473),n=s(5026);s(9605);let c=function({Component:e,pageProps:t}){let s=e.getLayout||(e=>e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"}),r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"})]}),r.jsx(l.H,{children:r.jsx(n.Z,{children:s(r.jsx(e,{...t}))})})]})}},9605:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[429,163,301,637],()=>s(2726));module.exports=r})();