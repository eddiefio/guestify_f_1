"use strict";(()=>{var e={};e.id=296,e.ids=[296],e.modules={1261:(e,t,n)=>{n.d(t,{N:()=>a});var r=n(3939);let i=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",o=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw";o||console.warn("Missing Supabase key");let a=(0,r.createClient)(i,o)},3480:(e,t,n)=>{e.exports=n(5600)},3939:e=>{e.exports=require("@supabase/supabase-js")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},7369:(e,t,n)=>{n.r(t),n.d(t,{config:()=>m,default:()=>d,routeModule:()=>P});var r={};n.r(r),n.d(r,{default:()=>c});var i=n(3480),o=n(8667),a=n(6435);let s=require("pdfkit");var l=n.n(s);let f=require("qrcode");var p=n.n(f),u=n(1261);async function c(e,t){let{propertyId:n}=e.query;if(!n)return t.status(400).json({error:"Property ID is required"});try{let{data:e,error:r}=await u.N.from("apartments").select("name").eq("id",n).single();if(r)throw r;let i=process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",o=`${i}/guest/menu/${n}`,a=await p().toDataURL(o,{width:300,margin:1,color:{dark:"#5e2bff",light:"#ffffff"}}),s=new(l())({size:"A4",margins:{top:50,bottom:50,left:50,right:50}});s.info.Title=`Guestify Menu - ${e.name}`,t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition",`attachment; filename=guestify-qrcode-${n}.pdf`),s.pipe(t),s.font("Helvetica-Bold").fontSize(24).fillColor("#5e2bff").text("Guestify Menu",{align:"center"}),s.moveDown(),s.font("Helvetica").fontSize(18).fillColor("#000000").text(e.name,{align:"center"}),s.moveDown(2),s.image(a,s.page.width/2-150,s.y,{width:300}),s.moveDown(2),s.fontSize(12).fillColor("#666666").text("Scan this QR code to access the menu",{align:"center"}),s.moveDown(),s.fontSize(10).fillColor("#999999").text(o,{align:"center"}),s.end()}catch(e){console.error("Error generating PDF:",e),t.status(500).json({error:"Failed to generate PDF"})}}let d=(0,a.M)(r,"default"),m=(0,a.M)(r,"config"),P=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/printqr-pdf",pathname:"/api/printqr-pdf",bundlePath:"",filename:""},userland:r})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=7369);module.exports=n})();