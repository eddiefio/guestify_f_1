"use strict";(()=>{var e={};e.id=756,e.ids=[756],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4463:(e,t,r)=>{r.r(t),r.d(t,{config:()=>u,default:()=>c,routeModule:()=>m});var n={};r.r(n),r.d(n,{default:()=>handler});var a=r(1802),i=r(7153),o=r(6249);let s=require("pdfkit");var l=r.n(s);let d=require("qrcode");var p=r.n(d),f=r(877);async function handler(e,t){let{propertyId:r}=e.query;if(!r)return t.status(400).json({error:"Property ID is required"});try{let{data:e,error:n}=await f.O.from("apartments").select("name").eq("id",r).single();if(n)throw n;let a=process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",i=`${a}/guest/menu/${r}`,o=await p().toDataURL(i,{width:300,margin:1,color:{dark:"#5e2bff",light:"#ffffff"}}),s=new(l())({size:"A4",margins:{top:50,bottom:50,left:50,right:50}});s.info.Title=`Guestify Menu - ${e.name}`,t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition",`attachment; filename=guestify-qrcode-${r}.pdf`),s.pipe(t),s.font("Helvetica-Bold").fontSize(24).fillColor("#5e2bff").text("Guestify Menu",{align:"center"}),s.moveDown(),s.font("Helvetica").fontSize(18).fillColor("#000000").text(e.name,{align:"center"}),s.moveDown(2),s.image(o,s.page.width/2-150,s.y,{width:300}),s.moveDown(2),s.fontSize(12).fillColor("#666666").text("Scan this QR code to access the menu",{align:"center"}),s.moveDown(),s.fontSize(10).fillColor("#999999").text(i,{align:"center"}),s.end()}catch(e){console.error("Error generating PDF:",e),t.status(500).json({error:"Failed to generate PDF"})}}let c=(0,o.l)(n,"default"),u=(0,o.l)(n,"config"),m=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/printqr-pdf",pathname:"/api/printqr-pdf",bundlePath:"",filename:""},userland:n})},877:(e,t,r)=>{r.d(t,{O:()=>o});let n=require("@supabase/supabase-js"),a=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;i||console.warn("Missing Supabase key");let o=(0,n.createClient)(a,i)}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222],()=>__webpack_exec__(4463));module.exports=r})();