"use strict";(()=>{var e={};e.id=756,e.ids=[756],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4463:(e,t,i)=>{i.r(t),i.d(t,{config:()=>u,default:()=>f,routeModule:()=>m});var n={};i.r(n),i.d(n,{default:()=>handler});var r=i(1802),a=i(7153),o=i(6249);let s=require("pdfkit");var l=i.n(s);let p=require("qrcode");var c=i.n(p),d=i(877);async function handler(e,t){let{propertyId:i}=e.query;if(!i)return t.status(400).json({error:"Property ID is required"});try{let{data:e,error:n}=await d.O.from("apartments").select("name").eq("id",i).single();if(n)throw n;let r=process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",a=`${r}/guest/menu/${i}`,o=await c().toDataURL(a,{width:300,margin:1,color:{dark:"#5e2bff",light:"#ffffff"}}),s=new(l())({size:"A4",margins:{top:50,bottom:50,left:50,right:50}});s.info.Title=`Guestify Menu - ${e.name}`,t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition",`attachment; filename=guestify-qrcode-${i}.pdf`),s.pipe(t),s.font("Helvetica-Bold").fontSize(24).fillColor("#5e2bff").text("Guestify Menu",{align:"center"}),s.moveDown(),s.font("Helvetica").fontSize(18).fillColor("#000000").text(e.name,{align:"center"}),s.moveDown(2),s.image(o,s.page.width/2-150,s.y,{width:300}),s.moveDown(2),s.fontSize(12).fillColor("#666666").text("Scan this QR code to access the menu",{align:"center"}),s.moveDown(),s.fontSize(10).fillColor("#999999").text(a,{align:"center"}),s.end()}catch(e){console.error("Error generating PDF:",e),t.status(500).json({error:"Failed to generate PDF"})}}let f=(0,o.l)(n,"default"),u=(0,o.l)(n,"config"),m=new r.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/printqr-pdf",pathname:"/api/printqr-pdf",bundlePath:"",filename:""},userland:n})},877:(e,t,i)=>{i.d(t,{O:()=>o});let n=require("@supabase/supabase-js"),r=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw";a||console.warn("Missing Supabase key");let o=(0,n.createClient)(r,a)}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),i=t.X(0,[222],()=>__webpack_exec__(4463));module.exports=i})();