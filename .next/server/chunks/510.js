exports.id=510,exports.ids=[510],exports.modules={5621:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var s=t(997),n=t(968),i=t.n(n),a=t(1664),o=t.n(a),l=t(5675),c=t.n(l);t(1163);var u=t(8473);function d({children:e,title:r="Guestify"}){let{user:t,signOut:n}=(0,u.a)();return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,s.jsxs)(i(),{children:[s.jsx("title",{children:r}),s.jsx("meta",{name:"description",content:"Guestify - Food service for Airbnb hosts"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),s.jsx("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center",children:t?s.jsx(o(),{href:"/host/dashboard",children:s.jsx("span",{className:"cursor-pointer",children:s.jsx(c(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,quality:100,className:"h-10 w-auto object-contain",priority:!0})})}):s.jsx("span",{children:s.jsx(c(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,quality:100,className:"h-10 w-auto object-contain",priority:!0})})}),s.jsx("nav",{className:"flex items-center",children:t?(0,s.jsxs)(s.Fragment,{children:[s.jsx(o(),{href:"/host/dashboard",children:s.jsx("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),s.jsx("button",{onClick:n,className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base bg-transparent border-none cursor-pointer",children:"Logout"}),s.jsx(o(),{href:"/host/profile",children:s.jsx("span",{className:"ml-2 cursor-pointer flex items-center",children:s.jsx("div",{className:"h-8 w-8 rounded-full bg-white text-[#5e2bff] flex items-center justify-center",children:s.jsx("i",{className:"fas fa-smile"})})})})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(o(),{href:"/auth/signin",children:s.jsx("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Login"})}),s.jsx(o(),{href:"/auth/signup",children:s.jsx("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Signup"})})]})})]})}),s.jsx("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow w-full",children:e}),s.jsx("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:s.jsx("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},8473:(e,r,t)=>{"use strict";t.d(r,{H:()=>l,a:()=>c});var s=t(997),n=t(6689),i=t(1163),a=t(2732);let o=(0,n.createContext)();function l({children:e}){let[r,t]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0),[h,m]=(0,n.useState)(!1),x=(0,i.useRouter)(),p=(0,n.useCallback)(async e=>{if(!e)return console.log("fetchUserProfile: No userId provided"),null;try{return console.log("Fetching user profile for:",e),await f(e)}catch(e){return console.error("Exception in fetchUserProfile:",e),null}},[]),f=async e=>{try{let{data:r,error:t}=await a.OQ.from("profiles").select("*").eq("id",e).single();if(t)return console.error("Error fetching profile from Supabase:",t),null;return console.log("Profile fetched successfully from Supabase:",r?.id),r}catch(e){return console.error("Unexpected error fetching profile:",e),null}},y=async(e,r)=>{try{console.log("Signing in user:",e);let{data:s,error:n}=await (0,a.q4)(()=>a.OQ.auth.signInWithPassword({email:e,password:r}));if(n)throw console.error("Sign in error:",n),n;if(console.log("Sign in successful:",s.user?.id),s.user){t(s.user);let e=await p(s.user.id);c(e)}return{user:s.user,error:null}}catch(e){return console.error("Error in signIn function:",e),{user:null,error:e}}},g=async(e,r,s)=>{try{let{data:n,error:i}=await (0,a.q4)(()=>a.OQ.auth.signUp({email:e,password:r,options:{data:s}}));if(i)throw i;return n.user&&(await (0,a.q4)(()=>a.OQ.from("profiles").insert([{id:n.user.id,...s}])),t(n.user),c({id:n.user.id,...s})),{user:n.user,error:null}}catch(e){return{user:null,error:e}}},w=async()=>{try{await a.OQ.auth.signOut(),t(null),c(null),x.push("/auth/signin")}catch(e){console.error("Error signing out:",e)}},j=async e=>{try{let{data:r,error:t}=await (0,a.q4)(()=>a.OQ.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`}));if(t)throw t;return{data:r,error:null}}catch(e){return{data:null,error:e}}},b=async e=>{try{let{data:r,error:t}=await (0,a.q4)(()=>a.OQ.auth.updateUser({password:e}));if(t)throw t;return{user:r.user,error:null}}catch(e){return{user:null,error:e}}},I=async e=>{if(!r)return{profile:null,error:Error("User not authenticated")};try{let{data:t,error:s}=await (0,a.q4)(()=>a.OQ.from("profiles").update(e).eq("id",r.id));if(s)throw s;let n={...l,...e};return c(n),{profile:t,error:null}}catch(e){return{profile:null,error:e}}};return s.jsx(o.Provider,{value:{user:r,profile:l,loading:u,authInitialized:h,signIn:y,signUp:g,signOut:w,resetPassword:j,updatePassword:b,updateProfile:I,isAuthenticated:()=>!!r},children:e})}let c=()=>(0,n.useContext)(o)},5026:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a,j:()=>o});var s=t(997),n=t(6689);let i=(0,n.createContext)();function a({children:e}){let[r,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(null);return s.jsx(i.Provider,{value:{cart:r,propertyId:a,setPropertyId:o,addToCart:e=>{let s=r.findIndex(r=>r.productId===e.productId&&r.propertyId===e.propertyId);if(s>=0){let n=[...r];n[s].quantity+=e.quantity,t(n)}else t([...r,e]);a||o(e.propertyId)},updateCartItem:(e,s,n)=>{t(r.map(r=>r.productId===e&&r.propertyId===s?{...r,quantity:n}:r))},removeFromCart:(e,s)=>{t(r.filter(r=>!(r.productId===e&&r.propertyId===s)))},clearCart:()=>{t([])},getCartTotal:()=>r.reduce((e,r)=>e+r.price*r.quantity,0),getCartCount:()=>r.reduce((e,r)=>e+r.quantity,0)},children:e})}let o=()=>(0,n.useContext)(i)},2732:(e,r,t)=>{"use strict";t.d(r,{OQ:()=>a,q4:()=>o});var s=t(2885);let n=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ndiqnzxplopcbcxzondp.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5kaXFuenhwbG9wY2JjeHpvbmRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk1NDkxODQsImV4cCI6MjA1NTEyNTE4NH0.jCnn7TFfGV1EpBHhO1ITa8PMytD7UJfADpuzrzZOgpw",a=(0,s.createClient)(n,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"supabase-auth",storage:{getItem:e=>null,setItem:(e,r)=>{},removeItem:e=>{}},cookieOptions:{secure:!0,sameSite:"lax",path:"/"}},global:{headers:{"Cache-Control":"no-store, no-cache, must-revalidate"}}}),o=async(e,r=3,t=1e3)=>{let s,n=0;for(;n<r;)try{return await e()}catch(i){s=i,console.warn(`Operation failed (attempt ${n+1}/${r}):`,i);let e=t*Math.pow(2,n);await new Promise(r=>setTimeout(r,e)),n++}throw s}},3414:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(997);t(9605);var n=t(968),i=t.n(n),a=t(6689),o=t(8473),l=t(5026);t(4595);let c=function({Component:e,pageProps:r}){let[t,n]=(0,a.useState)(!1),c=e.getLayout||(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"})]}),s.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),t?s.jsx(o.H,{children:s.jsx(l.Z,{children:c(s.jsx(e,{...r}))})}):s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})})]})}},9605:()=>{}};