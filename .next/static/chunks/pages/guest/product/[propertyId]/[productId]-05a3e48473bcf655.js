(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{2286:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(7876),r=s(7328),n=s.n(r),l=s(8230),i=s.n(l),c=s(4587),o=s.n(c),d=s(7734);function u(e){let{children:t,title:s="Guestify - Guest"}=e,{getCartCount:r,propertyId:l}=(0,d._)(),c=r();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:s}),(0,a.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb guests"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,a.jsx)("div",{children:l?(0,a.jsx)(i(),{href:"/guest/menu/".concat(l),children:(0,a.jsx)("span",{className:"cursor-pointer",children:(0,a.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})})}):(0,a.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(i(),{href:"/guest/cart",children:(0,a.jsxs)("span",{className:"text-white hover:opacity-80 relative cursor-pointer",children:[(0,a.jsx)("i",{className:"fas fa-shopping-cart text-2xl"}),c>0&&(0,a.jsx)("span",{className:"absolute top-[-8px] right-[-8px] bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:c})]})})})})]})}),(0,a.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 w-full flex-grow",children:t}),(0,a.jsx)("footer",{className:"bg-[#5e2bff] p-4",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},4480:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/guest/product/[propertyId]/[productId]",function(){return s(4783)}])},4783:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(7876),r=s(4232),n=s(9099),l=s(8230),i=s.n(l),c=s(4587),o=s.n(c),d=s(2286),u=s(7734),x=s(2337);function m(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(1),[c,d]=(0,r.useState)(!0),[m,p]=(0,r.useState)(null),{addToCart:h}=(0,u._)(),f=(0,n.useRouter)(),{propertyId:g,productId:y,category:j}=f.query;(0,r.useEffect)(()=>{g&&y&&e();async function e(){try{d(!0);let{data:e,error:s}=await x.N.from("inventory").select("\n            id,\n            apartment_id,\n            quantity,\n            price,\n            product_id,\n            products ( name, description, image_url, category )\n          ").eq("apartment_id",g).eq("product_id",y).single();if(s)throw s;if(!e)throw Error("Product not found");t(e)}catch(e){console.error("Error fetching product:",e),p(e.message||"Failed to load product details")}finally{d(!1)}}},[g,y]);let b=t=>{l(s=>{let a=s+t;return a<1?1:e&&a>e.quantity?e.quantity:a})};return c?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):m?(0,a.jsxs)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:[m,(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(i(),{href:"/guest/menu/".concat(g),children:(0,a.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Menu"})})})]}):e?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"bg-white p-2 rounded-xl mb-4 inline-block",children:(0,a.jsx)(i(),{href:j?"/guest/menu/".concat(g,"?category=").concat(encodeURIComponent(j)):"/guest/menu/".concat(g),children:(0,a.jsx)("span",{className:"text-sm text-[#5e2bff] font-semibold underline cursor-pointer",children:"Back to Menu"})})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.products.image_url?(0,a.jsx)("div",{className:"relative w-full h-64",children:(0,a.jsx)(o(),{src:e.products.image_url,alt:e.products.name,layout:"fill",objectFit:"cover",priority:!0})}):(0,a.jsx)("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-500",children:"No image available"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:e.products.name}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:e.products.description||"No description available"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["â‚¬",parseFloat(e.price).toFixed(2)]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.quantity," in stock"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("button",{onClick:()=>b(-1),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-xl font-bold","aria-label":"Decrease quantity",children:"âˆ’"}),(0,a.jsx)("input",{type:"number",value:s,onChange:e=>{let t=parseInt(e.target.value);isNaN(t)||l(t)},min:"1",max:e.quantity,className:"w-16 mx-2 border rounded px-2 py-1 text-center"}),(0,a.jsx)("button",{onClick:()=>b(1),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-xl font-bold","aria-label":"Increase quantity",children:"+"})]}),(0,a.jsxs)("button",{onClick:()=>{e&&(h({propertyId:e.apartment_id,productId:e.product_id,name:e.products.name,price:parseFloat(e.price),quantity:s}),j?f.push("/guest/menu/".concat(g,"?category=").concat(encodeURIComponent(j))):f.push("/guest/menu/".concat(g)))},className:"bg-[#fad02f] text-black px-6 py-2 rounded-full text-base font-semibold hover:opacity-90 transition w-full sm:w-auto",children:["Add for â‚¬",(parseFloat(e.price)*s).toFixed(2)]})]})]})]}),e.products.category&&(0,a.jsx)("div",{className:"mt-4 inline-block bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-700",children:e.products.category})]}):null}m.getLayout=function(e){return(0,a.jsx)(d.A,{title:"Product Details - Guestify",children:e})}}},e=>{var t=t=>e(e.s=t);e.O(0,[92,636,593,792],()=>t(4480)),_N_E=e.O()}]);