(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{4809:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guest/cart",function(){return s(374)}])},9488:function(e,t,s){"use strict";s.d(t,{Z:function(){return GuestLayout}});var r=s(5893),a=s(9008),n=s.n(a),l=s(1664),c=s.n(l),i=s(5675),d=s.n(i),o=s(6999);function GuestLayout(e){let{children:t,title:s="Guestify - Guest"}=e,{getCartCount:a,propertyId:l}=(0,o.j)(),i=a();return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:s}),(0,r.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb guests"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,r.jsx)("div",{children:l?(0,r.jsx)(c(),{href:"/guest/menu/".concat(l),children:(0,r.jsx)("span",{className:"cursor-pointer",children:(0,r.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})})}):(0,r.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:40,height:40,className:"h-10 w-auto"})}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(c(),{href:"/guest/cart",children:(0,r.jsxs)("span",{className:"text-white hover:opacity-80 relative cursor-pointer",children:[(0,r.jsx)("i",{className:"fas fa-shopping-cart text-2xl"}),i>0&&(0,r.jsx)("span",{className:"absolute top-[-8px] right-[-8px] bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:i})]})})})})]})}),(0,r.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 w-full flex-grow",children:t}),(0,r.jsx)("footer",{className:"bg-[#5e2bff] p-4",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},374:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Cart}});var r=s(5893),a=s(7294),n=s(1163),l=s(1664),c=s.n(l),i=s(9488),d=s(6999);function Cart(){let{cart:e,propertyId:t,updateCartItem:s,removeFromCart:l,getCartTotal:i}=(0,d.j)(),[o,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),m=(0,n.useRouter)(),handleCheckout=async()=>{if(0!==e.length){x(!0),h(null);try{let s=await fetch("/api/orders/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({propertyId:t,cart:e})}),r=await s.json();if(!s.ok)throw Error(r.error||"Checkout failed");m.push("/guest/checkout?orderId=".concat(r.orderId))}catch(e){console.error("Checkout error:",e),h(e.message||"Failed to process checkout")}finally{x(!1)}}},p=i(),f=.15*p;return(0,r.jsxs)("div",{children:[t&&(0,r.jsx)("div",{className:"bg-white p-2 rounded-xl mb-4 inline-block",children:(0,r.jsx)(c(),{href:"/guest/menu/".concat(t),children:(0,r.jsx)("span",{className:"text-sm text-[#5e2bff] font-semibold underline cursor-pointer",children:"Back to Menu"})})}),(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Your Cart"}),u&&(0,r.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:u}),(0,r.jsx)("div",{className:"overflow-x-auto w-full",children:e&&e.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("table",{className:"table-auto w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Product"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Price"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Quantity"}),(0,r.jsx)("th",{className:"px-2 py-2 w-10"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Subtotal"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>{let t=e.price*e.quantity;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-2 py-2",children:e.name}),(0,r.jsxs)("td",{className:"px-2 py-2",children:["€",e.price.toFixed(2)]}),(0,r.jsx)("td",{className:"px-2 py-2",children:(0,r.jsx)("input",{type:"number",className:"w-16 border rounded px-2 py-1 text-sm",value:e.quantity,min:"1",onChange:t=>{let r=parseInt(t.target.value,10)||1;s(e.productId,e.propertyId,r)}})}),(0,r.jsx)("td",{className:"px-2 py-2 text-center w-10",children:(0,r.jsx)("button",{onClick:()=>l(e.productId,e.propertyId),className:"text-red-500 hover:text-red-700",title:"Remove",children:(0,r.jsx)("i",{className:"fas fa-trash"})})}),(0,r.jsxs)("td",{className:"px-2 py-2 text-right",children:["€",t.toFixed(2)]})]},"".concat(e.propertyId,"-").concat(e.productId))})}),(0,r.jsxs)("tfoot",{className:"bg-white",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"4"}),(0,r.jsxs)("td",{className:"px-2 py-2 text-right text-gray-700",children:["Subtotal: €",p.toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"4"}),(0,r.jsxs)("td",{className:"px-2 py-2 text-right text-gray-700",children:["Service Fee: €",f.toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"4"}),(0,r.jsxs)("td",{className:"px-2 py-2 text-right font-bold text-gray-700",children:["Total: €",(p+f).toFixed(2)]})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end",children:(0,r.jsx)("button",{onClick:handleCheckout,disabled:o,className:"bg-[#fad02f] text-black px-3 py-1 rounded-full text-sm hover:bg-[#fad02f]/90 transition font-semibold",children:o?"Processing...":"Checkout"})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Your cart is empty."}),t&&(0,r.jsx)("div",{className:"bg-white p-2 rounded-xl inline-block",children:(0,r.jsx)(c(),{href:"/guest/menu/".concat(t),children:(0,r.jsx)("span",{className:"text-sm text-[#5e2bff] font-semibold underline cursor-pointer",children:"Back to Menu"})})})]})})]})}Cart.getLayout=function(e){return(0,r.jsx)(i.Z,{title:"Your Cart - Guestify",children:e})}}},function(e){e.O(0,[664,675,774,888,179],function(){return e(e.s=4809)}),_N_E=e.O()}]);