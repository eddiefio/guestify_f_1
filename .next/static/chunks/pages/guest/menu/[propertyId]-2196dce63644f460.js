(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{339:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guest/menu/[propertyId]",function(){return s(7676)}])},7171:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(5893),r=s(9008),n=s.n(r),i=s(1664),l=s.n(i),c=s(5675),o=s.n(c),d=s(5213);function x(e){let{children:t,title:s="Guestify - Guest"}=e,{getCartCount:r,propertyId:i}=(0,d.j)(),c=r();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:s}),(0,a.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb guests"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-[#5e2bff] py-1 px-4 shadow-md rounded-b-xl",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,a.jsx)("div",{children:i?(0,a.jsx)(l(),{href:"/guest/menu/".concat(i),children:(0,a.jsx)("span",{className:"cursor-pointer",children:(0,a.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:160,height:100,quality:100,priority:!0,className:"w-40 h-24",style:{objectFit:"contain"}})})}):(0,a.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify Logo",width:160,height:100,quality:100,priority:!0,className:"w-40 h-24",style:{objectFit:"contain"}})}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(l(),{href:"/guest/cart",children:(0,a.jsxs)("span",{className:"text-white hover:opacity-80 relative cursor-pointer",children:[(0,a.jsx)("i",{className:"fas fa-shopping-cart text-2xl"}),c>0&&(0,a.jsx)("span",{className:"absolute top-[-8px] right-[-8px] bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:c})]})})})})]})}),(0,a.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 w-full flex-grow",children:t}),(0,a.jsx)("footer",{className:"bg-[#5e2bff] p-4",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},7676:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(5893),r=s(7294),n=s(1163),i=s(1664),l=s.n(i),c=s(5675),o=s.n(c),d=s(7171),x=s(5213),u=s(5240);function m(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),{propertyId:m,category:f}=(0,n.useRouter)().query,{addToCart:h,setPropertyId:p}=(0,x.j)();(0,r.useEffect)(()=>{m&&(p(m),e());async function e(){try{i(!0);let{data:e,error:s}=await u.OQ.from("inventory").select("\n            id,\n            apartment_id,\n            quantity,\n            price,\n            product_id,\n            products ( name, description, image_url, category )\n          ").eq("apartment_id",m).gt("quantity",0);if(s)throw s;t(e||[])}catch(e){console.error("Error fetching inventory:",e),d("Failed to load products")}finally{i(!1)}}},[m,p]);let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;h({propertyId:e.apartment_id,productId:e.product_id,name:e.products.name,price:parseFloat(e.price),quantity:parseInt(t,10)})};if(!f)return(0,a.jsxs)("div",{className:"h-full flex flex-col justify-center",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 text-center",children:"Select a category"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 flex-grow",children:[(0,a.jsx)(l(),{href:"/guest/menu/".concat(m,"?category=Food%20and%20Drinks"),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow flex flex-col items-center justify-center p-6 hover:shadow-lg transition cursor-pointer",style:{minHeight:"250px"},children:[(0,a.jsx)("i",{className:"fas fa-utensils fa-4x text-[#fad02f] mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-[#000000] mb-1",children:"Food and Drinks"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"View all food and drinks."})]})}),(0,a.jsx)(l(),{href:"/guest/menu/".concat(m,"?category=Articles"),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow flex flex-col items-center justify-center p-6 hover:shadow-lg transition cursor-pointer",style:{minHeight:"250px"},children:[(0,a.jsx)("i",{className:"fas fa-box-open fa-4x text-[#fad02f] mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-[#000000] mb-1",children:"Articles"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"View all articles."})]})})]})]});let j=e.filter(e=>{var t;return(null===(t=e.products)||void 0===t?void 0:t.category)===f});return s?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):c?(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:c}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:["Products - ",f]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:j.length>0?j.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex flex-col",children:[(0,a.jsx)(l(),{href:"/guest/product/".concat(e.apartment_id,"/").concat(e.product_id,"?category=").concat(encodeURIComponent(f)),children:(0,a.jsx)("div",{className:"cursor-pointer",children:(null===(t=e.products)||void 0===t?void 0:t.image_url)?(0,a.jsx)("div",{className:"relative w-full h-40 mb-2",children:(0,a.jsx)(o(),{src:e.products.image_url,alt:e.products.name,layout:"fill",objectFit:"cover",className:"rounded"})}):(0,a.jsx)("div",{className:"w-full h-40 bg-gray-100 flex items-center justify-center rounded mb-2",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"No Image"})})})}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-bold text-gray-800 mb-1",children:null===(s=e.products)||void 0===s?void 0:s.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Availability: ",e.quantity]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Price: â‚¬",parseFloat(e.price).toFixed(2)]}),(0,a.jsx)("div",{className:"mt-auto flex items-center space-x-2",children:(0,a.jsxs)("form",{className:"flex items-center space-x-2 w-full",children:[(0,a.jsx)("input",{type:"number",min:"1",max:e.quantity,defaultValue:"1",className:"w-16 border rounded px-2 py-1 text-sm",onChange:e=>{e.target.dataset.quantity=e.target.value}}),(0,a.jsx)("button",{type:"button",onClick:t=>{g(e,parseInt(t.target.form[0].dataset.quantity||t.target.form[0].value,10))},className:"bg-[#fad02f] text-black px-3 py-1 rounded-full text-sm hover:bg-[#fad02f]/90 transition flex-grow font-semibold",children:"Add to Cart"})]})})]},e.id)}):(0,a.jsx)("p",{className:"col-span-2 text-center text-gray-500",children:"No products available in this category."})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(l(),{href:"/guest/menu/".concat(m),children:(0,a.jsx)("span",{className:"text-sm text-[#5e2bff] font-semibold underline cursor-pointer",children:"Back to Menu"})})})]})}m.getLayout=function(e){return(0,a.jsx)(d.Z,{title:"Menu - Guestify",children:e})}}},function(e){e.O(0,[61,888,774,179],function(){return e(e.s=339)}),_N_E=e.O()}]);