(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{5284:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/host/profile",function(){return t(2296)}])},430:function(e,s,t){"use strict";t.d(s,{Z:function(){return m}});var a=t(5893),r=t(9008),n=t.n(r),l=t(1664),i=t.n(l),o=t(5675),d=t.n(o);t(1163);var c=t(5482);function m(e){let{children:s,title:t="Guestify"}=e,{user:r,signOut:l}=(0,c.a)();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb hosts"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:r?(0,a.jsx)(i(),{href:"/host/dashboard",children:(0,a.jsx)("span",{className:"cursor-pointer",children:(0,a.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}):(0,a.jsx)("span",{children:(0,a.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}),(0,a.jsx)("nav",{className:"flex items-center",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{href:"/host/dashboard",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,a.jsx)("button",{onClick:l,className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base bg-transparent border-none cursor-pointer",children:"Logout"}),(0,a.jsx)(i(),{href:"/host/profile",children:(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-white text-[#5e2bff] flex items-center justify-center",children:(0,a.jsx)("i",{className:"fas fa-smile"})})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{href:"/auth/signin",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Login"})}),(0,a.jsx)(i(),{href:"/auth/signup",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Signup"})})]})})]})}),(0,a.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow w-full",children:s}),(0,a.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},2296:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(5893),r=t(7294),n=t(1163),l=t(430),i=t(5482);function o(){let{user:e,profile:s,updateProfile:t,updatePassword:l}=(0,i.a)(),[o,d]=(0,r.useState)({name:"",phone:""}),[c,m]=(0,r.useState)({old_password:"",new_password:"",confirm_password:""}),[x,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,w]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[N,v]=(0,r.useState)(null);(0,n.useRouter)(),(0,r.useEffect)(()=>{s&&d({name:s.name||"",phone:s.phone||""})},[s]);let _=e=>{let{name:s,value:t}=e.target;d({...o,[s]:t})},P=e=>{let{name:s,value:t}=e.target;m({...c,[s]:t})},k=async e=>{e.preventDefault(),u(!0),y(null),w(null);try{let{error:e}=await t(o);if(e)throw e;w("Profile updated successfully.")}catch(e){console.error("Error updating profile:",e),y(e.message||"Failed to update profile")}finally{u(!1)}},C=async s=>{if(s.preventDefault(),p(!0),v(null),j(null),c.new_password!==c.confirm_password){v("New passwords do not match"),p(!1);return}try{let{data:s,error:t}=await signIn(e.email,c.old_password);if(t)throw Error("Current password is incorrect");let{error:a}=await l(c.new_password);if(a)throw a;j("Password updated successfully."),m({old_password:"",new_password:"",confirm_password:""})}catch(e){console.error("Error updating password:",e),v(e.message||"Failed to update password")}finally{p(!1)}};return e&&s?(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-md shadow mt-10",children:[f&&(0,a.jsx)("div",{className:"mb-6 p-3 bg-green-100 text-green-800 rounded",children:f}),g&&(0,a.jsx)("div",{className:"mb-6 p-3 bg-red-100 text-red-800 rounded",children:g}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"User Profile"}),(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Personal Information"}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",value:e.email,className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,a.jsx)("input",{type:"text",value:s.country||"",className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("input",{type:"text",name:"name",value:o.name,onChange:_,className:"w-full border rounded px-3 py-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,a.jsx)("input",{type:"text",name:"phone",value:o.phone,onChange:_,className:"w-full border rounded px-3 py-2"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:x,children:x?"Saving...":"Save"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Change Password"}),b&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded",children:b}),N&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-800 rounded",children:N}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Old Password"}),(0,a.jsx)("input",{type:"password",name:"old_password",value:c.old_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"Old Password",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,a.jsx)("input",{type:"password",name:"new_password",value:c.new_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"New Password",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",name:"confirm_password",value:c.confirm_password,onChange:P,className:"w-full border rounded px-3 py-2",placeholder:"Confirm New Password",required:!0})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:h,children:h?"Updating...":"Change Password"})})]})]})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})})}o.getLayout=function(e){return(0,a.jsx)(l.Z,{title:"Profile - Guestify",children:e})}}},function(e){e.O(0,[61,888,774,179],function(){return e(e.s=5284)}),_N_E=e.O()}]);