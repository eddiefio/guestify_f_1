(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{5284:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/host/profile",function(){return a(5180)}])},9430:function(e,s,a){"use strict";a.d(s,{Z:function(){return Layout}});var t=a(5893),r=a(9008),n=a.n(r),l=a(1664),o=a.n(l),i=a(5675),d=a.n(i);a(1163);var c=a(7016);function Layout(e){let{children:s,title:a="Guestify"}=e,{user:r,signOut:l}=(0,c.a)();return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:a}),(0,t.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb hosts"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,t.jsx)("div",{className:"flex items-center",children:r?(0,t.jsx)(o(),{href:"/host/dashboard",children:(0,t.jsx)("span",{className:"cursor-pointer",children:(0,t.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}):(0,t.jsx)("span",{children:(0,t.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}),(0,t.jsx)("nav",{className:"flex items-center",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{href:"/host/dashboard",children:(0,t.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,t.jsx)("button",{onClick:l,className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base bg-transparent border-none cursor-pointer",children:"Logout"}),(0,t.jsx)(o(),{href:"/host/profile",children:(0,t.jsx)("span",{className:"ml-2 cursor-pointer",children:(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-white text-[#5e2bff] flex items-center justify-center",children:(0,t.jsx)("i",{className:"fas fa-smile"})})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{href:"/auth/signin",children:(0,t.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Login"})}),(0,t.jsx)(o(),{href:"/auth/signup",children:(0,t.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Signup"})})]})})]})}),(0,t.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow w-full",children:s}),(0,t.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},5180:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Profile}});var t=a(5893),r=a(7294),n=a(1163),l=a(9430),o=a(7016);function Profile(){let{user:e,profile:s,updateProfile:a,updatePassword:l}=(0,o.a)(),[i,d]=(0,r.useState)({name:"",phone:""}),[c,m]=(0,r.useState)({old_password:"",new_password:"",confirm_password:""}),[x,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,w]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[N,v]=(0,r.useState)(null);(0,n.useRouter)(),(0,r.useEffect)(()=>{s&&d({name:s.name||"",phone:s.phone||""})},[s]);let handleProfileChange=e=>{let{name:s,value:a}=e.target;d({...i,[s]:a})},handlePasswordChange=e=>{let{name:s,value:a}=e.target;m({...c,[s]:a})},handleProfileSubmit=async e=>{e.preventDefault(),u(!0),y(null),w(null);try{let{error:e}=await a(i);if(e)throw e;w("Profile updated successfully.")}catch(e){console.error("Error updating profile:",e),y(e.message||"Failed to update profile")}finally{u(!1)}},handlePasswordSubmit=async s=>{if(s.preventDefault(),p(!0),v(null),j(null),c.new_password!==c.confirm_password){v("New passwords do not match"),p(!1);return}try{let{data:s,error:a}=await signIn(e.email,c.old_password);if(a)throw Error("Current password is incorrect");let{error:t}=await l(c.new_password);if(t)throw t;j("Password updated successfully."),m({old_password:"",new_password:"",confirm_password:""})}catch(e){console.error("Error updating password:",e),v(e.message||"Failed to update password")}finally{p(!1)}};return e&&s?(0,t.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-md shadow mt-10",children:[f&&(0,t.jsx)("div",{className:"mb-6 p-3 bg-green-100 text-green-800 rounded",children:f}),g&&(0,t.jsx)("div",{className:"mb-6 p-3 bg-red-100 text-red-800 rounded",children:g}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"User Profile"}),(0,t.jsxs)("div",{className:"mb-10",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Personal Information"}),(0,t.jsxs)("form",{onSubmit:handleProfileSubmit,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,t.jsx)("input",{type:"email",value:e.email,className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,t.jsx)("input",{type:"text",value:s.country||"",className:"w-full border rounded px-3 py-2 bg-gray-100",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:i.name,onChange:handleProfileChange,className:"w-full border rounded px-3 py-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,t.jsx)("input",{type:"text",name:"phone",value:i.phone,onChange:handleProfileChange,className:"w-full border rounded px-3 py-2"})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:x,children:x?"Saving...":"Save"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Change Password"}),b&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded",children:b}),N&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-800 rounded",children:N}),(0,t.jsxs)("form",{onSubmit:handlePasswordSubmit,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Old Password"}),(0,t.jsx)("input",{type:"password",name:"old_password",value:c.old_password,onChange:handlePasswordChange,className:"w-full border rounded px-3 py-2",placeholder:"Old Password",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,t.jsx)("input",{type:"password",name:"new_password",value:c.new_password,onChange:handlePasswordChange,className:"w-full border rounded px-3 py-2",placeholder:"New Password",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",name:"confirm_password",value:c.confirm_password,onChange:handlePasswordChange,className:"w-full border rounded px-3 py-2",placeholder:"Confirm New Password",required:!0})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#fad02f] text-black rounded hover:opacity-90 transition font-semibold",disabled:h,children:h?"Updating...":"Change Password"})})]})]})]}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})})}Profile.getLayout=function(e){return(0,t.jsx)(l.Z,{title:"Profile - Guestify",children:e})}}},function(e){e.O(0,[664,675,774,888,179],function(){return e(e.s=5284)}),_N_E=e.O()}]);