(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7876),a=s(4232),i=s(9099),n=s(9002),l=s(1044),c=s(2337);function o(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),{propertyId:m}=(0,i.useRouter)().query;return(0,a.useEffect)(()=>{m&&e();async function e(){try{d(!0);let{data:e,error:s}=await c.N.from("apartments").select("name").eq("id",m).single();if(s)throw s;n(e.name);let{data:r,error:a}=await c.N.from("orders").select("*").eq("apartment_id",m).order("order_date",{ascending:!1});if(a)throw a;t(r||[])}catch(e){console.error("Error fetching orders:",e),h("Failed to load orders")}finally{d(!1)}}},[m]),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.A,{propertyId:m,activeTab:"orders",propertyName:s}),(0,r.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-4",children:"Orders"}),o?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-500"})}):x?(0,r.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:x}):(0,r.jsx)("div",{className:"bg-white shadow rounded-lg overflow-x-auto text-sm sm:text-base p-2",children:e&&e.length>0?(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-violet-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left font-medium text-[#5e2bff]",children:"Order Date"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left font-medium text-[#5e2bff]",children:"Order ID"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left font-medium text-[#5e2bff]",children:"Total Price"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>{let t=new Date(e.order_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2",children:t}),(0,r.jsxs)("td",{className:"px-4 py-2",children:["#",e.id]}),(0,r.jsxs)("td",{className:"px-4 py-2",children:["EUR ",Number(e.total_price).toFixed(2)]})]},e.id)})}),(0,r.jsx)("tfoot",{className:"bg-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:"2",className:"px-4 py-2 text-right font-bold text-gray-700",children:"Total Revenue:"}),(0,r.jsxs)("td",{className:"px-4 py-2 font-bold text-gray-700",children:["EUR ",e.reduce((e,t)=>e+parseFloat(t.total_price||0),0).toFixed(2)]})]})})]}):(0,r.jsx)("p",{className:"text-gray-500 p-4",children:"No orders yet."})})]})}o.getLayout=function(e){return(0,r.jsx)(n.A,{title:"Orders - Guestify",children:e})}},1044:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(7876),a=s(8230),i=s.n(a);function n(e){let{propertyId:t,activeTab:s,propertyName:a}=e;return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(i(),{href:"/host/dashboard",children:(0,r.jsxs)("span",{className:"text-[#5e2bff] hover:underline flex items-center cursor-pointer",children:[(0,r.jsx)("i",{className:"fas fa-arrow-left mr-1"})," Back to Dashboard"]})})}),(0,r.jsxs)("h2",{className:"text-lg sm:text-2xl font-bold text-[#5e2bff] mb-4",children:["Property: ",a||""]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center items-center gap-2 mb-4",children:[{id:"analytics",label:"Analytics",href:"/host/analytics/".concat(t)},{id:"orders",label:"Orders",href:"/host/orders/".concat(t)},{id:"inventory",label:"Inventory",href:"/host/inventory/".concat(t)},{id:"printqr",label:"Print QR",href:"/host/printqr/".concat(t)}].map(e=>(0,r.jsx)(i(),{href:e.href,children:(0,r.jsx)("span",{className:"px-3 py-1 rounded text-sm hover:bg-gray-300 transition cursor-pointer ".concat(s===e.id?"bg-[#fad02f] text-black font-bold hover:opacity-90":"bg-gray-200"),children:e.label})},e.id))})]})}},3788:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/host/orders/[propertyId]",function(){return s(562)}])},9002:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(7876),a=s(7328),i=s.n(a),n=s(8230),l=s.n(n),c=s(4587),o=s.n(c);s(9099);var d=s(1302);function x(e){let{children:t,title:s="Guestify"}=e,{user:a,signOut:n}=(0,d.A)();return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:s}),(0,r.jsx)("meta",{name:"description",content:"Guestify - Food service for Airbnb hosts"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,r.jsx)("div",{className:"flex items-center",children:a?(0,r.jsx)(l(),{href:"/host/dashboard",children:(0,r.jsx)("span",{className:"cursor-pointer",children:(0,r.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}):(0,r.jsx)("span",{children:(0,r.jsx)(o(),{src:"/images/guestify_logo.png",alt:"Guestify",width:40,height:40,className:"h-10 w-auto"})})}),(0,r.jsx)("nav",{className:"flex items-center",children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{href:"/host/dashboard",children:(0,r.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,r.jsx)("button",{onClick:n,className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base bg-transparent border-none cursor-pointer",children:"Logout"}),(0,r.jsx)(l(),{href:"/host/profile",children:(0,r.jsx)("span",{className:"ml-2 cursor-pointer",children:(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-white text-[#5e2bff] flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-smile"})})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{href:"/auth/signin",children:(0,r.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Login"})}),(0,r.jsx)(l(),{href:"/auth/signup",children:(0,r.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Signup"})})]})})]})}),(0,r.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow w-full",children:t}),(0,r.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[92,636,593,792],()=>t(3788)),_N_E=e.O()}]);