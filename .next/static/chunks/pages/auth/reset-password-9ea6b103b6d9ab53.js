(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{6742:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return t(9027)}])},5102:function(e,s,t){"use strict";t.d(s,{Z:function(){return AuthLayout}});var a=t(5893),n=t(9008),r=t.n(n),o=t(1664),i=t.n(o),l=t(5675),d=t.n(l),c=t(7016);function AuthLayout(e){let{children:s,title:t="Guestify - Auth"}=e,{user:n}=(0,c.a)();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"description",content:"Guestify - Authentication"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:32,height:32,className:"h-8 w-auto mr-2"})}),(0,a.jsx)("nav",{children:n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{href:"/host/dashboard",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,a.jsx)(i(),{href:"/auth/logout",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Logout"})})]})})]})}),(0,a.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow",children:s}),(0,a.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},9027:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ResetPassword}});var a=t(5893),n=t(7294),r=t(1163),o=t(1664),i=t.n(o),l=t(5102),d=t(7016),c=t(824);function ResetPassword(){let[e,s]=(0,n.useState)(""),[t,o]=(0,n.useState)(""),[l,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[p,w]=(0,n.useState)(!1),b=(0,r.useRouter)(),{updatePassword:g}=(0,d.a)();(0,n.useEffect)(()=>{let{access_token:e}=b.query;if(e)u(e),document.cookie="access_token=".concat(e,"; path=/; max-age=3600; SameSite=Lax");else{let e=document.cookie.split(";"),s=e.find(e=>e.trim().startsWith("access_token="));if(s){let e=s.split("=")[1];u(e)}}},[b.query]);let handleSubmit=async s=>{if(s.preventDefault(),x(!0),f(null),w(!1),e!==t){f("Passwords do not match"),x(!1);return}try{l&&c.O.auth.setSession(l);let{error:s}=await g(e);if(s)throw s;w(!0),document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(()=>{b.push("/auth/signin")},3e3)}catch(e){console.error("Error updating password:",e),f(e.message||"Failed to update password")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Reset Your Password"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Please enter your new password below."}),h&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:h}),p&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Password updated successfully! Redirecting to sign in..."}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsx)("input",{type:"hidden",name:"access_token",value:l}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsx)("input",{type:"password",id:"new_password",value:e,onChange:e=>s(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",id:"confirm_password",value:t,onChange:e=>o(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold",disabled:m||!l,children:m?"Updating...":"Update Password"})]}),(0,a.jsx)("div",{className:"mt-4 text-center text-sm",children:(0,a.jsx)(i(),{href:"/auth/signin",children:(0,a.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Sign In"})})})]})}ResetPassword.getLayout=function(e){return(0,a.jsx)(l.Z,{title:"Reset Password - Guestify",children:e})}}},function(e){e.O(0,[664,675,774,888,179],function(){return e(e.s=6742)}),_N_E=e.O()}]);