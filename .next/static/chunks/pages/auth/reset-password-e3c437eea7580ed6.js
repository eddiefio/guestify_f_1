(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{6742:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return t(3791)}])},6629:function(e,s,t){"use strict";t.d(s,{Z:function(){return u}});var n=t(5893),a=t(9008),r=t.n(a),i=t(1664),o=t.n(i),l=t(5675),c=t.n(l),d=t(5482);function u(e){let{children:s,title:t="Guestify - Auth"}=e,{user:a,authInitialized:i}=(0,d.a)();return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{name:"description",content:"Guestify - Authentication"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("header",{className:"bg-[#5e2bff] py-1 px-4 shadow-md rounded-b-xl",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(c(),{src:"/images/guestify_logo.png",alt:"Guestify",width:160,height:100,quality:100,priority:!0,className:"w-40 h-24",style:{objectFit:"contain"}})}),(0,n.jsx)("nav",{className:"flex items-center",children:i&&a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{href:"/host/dashboard",children:(0,n.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,n.jsx)(o(),{href:"/auth/logout",children:(0,n.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Logout"})})]}):null})]})}),(0,n.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow",children:s}),(0,n.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,n.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,n.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},3791:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var n=t(5893),a=t(7294),r=t(1163),i=t(1664),o=t.n(i),l=t(6629),c=t(5482),d=t(5240);function u(){let[e,s]=(0,a.useState)(""),[t,i]=(0,a.useState)(""),[l,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[p,w]=(0,a.useState)(!1),g=(0,r.useRouter)(),{updatePassword:b}=(0,c.a)();(0,a.useEffect)(()=>{let{access_token:e}=g.query;if(e)u(e),document.cookie="access_token=".concat(e,"; path=/; max-age=3600; SameSite=Lax");else{let e=document.cookie.split(";").find(e=>e.trim().startsWith("access_token="));e&&u(e.split("=")[1])}},[g.query]);let j=async s=>{if(s.preventDefault(),x(!0),f(null),w(!1),e!==t){f("Passwords do not match"),x(!1);return}try{l&&d.OQ.auth.setSession(l);let{error:s}=await b(e);if(s)throw s;w(!0),document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(()=>{g.push("/auth/signin")},3e3)}catch(e){console.error("Error updating password:",e),f(e.message||"Failed to update password")}finally{x(!1)}};return(0,n.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Reset Your Password"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Please enter your new password below."}),h&&(0,n.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:h}),p&&(0,n.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Password updated successfully! Redirecting to sign in..."}),(0,n.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,n.jsx)("input",{type:"hidden",name:"access_token",value:l}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,n.jsx)("input",{type:"password",id:"new_password",value:e,onChange:e=>s(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,n.jsx)("input",{type:"password",id:"confirm_password",value:t,onChange:e=>i(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold",disabled:m||!l,children:m?"Updating...":"Update Password"})]}),(0,n.jsx)("div",{className:"mt-4 text-center text-sm",children:(0,n.jsx)(o(),{href:"/auth/signin",children:(0,n.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Sign In"})})})]})}u.getLayout=function(e){return(0,n.jsx)(l.Z,{title:"Reset Password - Guestify",children:e})}}},function(e){e.O(0,[61,888,774,179],function(){return e(e.s=6742)}),_N_E=e.O()}]);