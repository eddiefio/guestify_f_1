(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{2820:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return t(9867)}])},4292:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var a=t(7876),r=t(7328),n=t.n(r),i=t(8230),o=t.n(i),l=t(4587),d=t.n(l),c=t(1302);function u(e){let{children:s,title:t="Guestify - Auth"}=e,{user:r}=(0,c.A)();return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 text-gray-800",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"description",content:"Guestify - Authentication"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-[#5e2bff] p-4 shadow-md rounded-b-xl",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(d(),{src:"/images/guestify_logo.png",alt:"Guestify",width:32,height:32,className:"h-8 w-auto mr-2"})}),(0,a.jsx)("nav",{children:r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o(),{href:"/host/dashboard",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white font-semibold hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Dashboard"})}),(0,a.jsx)(o(),{href:"/auth/logout",children:(0,a.jsx)("span",{className:"mx-1 sm:mx-2 text-white hover:opacity-80 transition-colors text-sm sm:text-base cursor-pointer",children:"Logout"})})]})})]})}),(0,a.jsx)("main",{className:"max-w-6xl mx-auto my-4 p-2 sm:p-4 rounded-xl flex-grow",children:s}),(0,a.jsx)("footer",{className:"bg-[#5e2bff] p-4 rounded-t-xl",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center text-white text-sm",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Guestify"]})})})]})}},9867:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(7876),r=t(4232),n=t(9099),i=t(8230),o=t.n(i),l=t(4292),d=t(1302),c=t(2337);function u(){let[e,s]=(0,r.useState)(""),[t,i]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[f,w]=(0,r.useState)(!1),g=(0,n.useRouter)(),{updatePassword:b}=(0,d.A)();(0,r.useEffect)(()=>{let{access_token:e}=g.query;if(e)u(e),document.cookie="access_token=".concat(e,"; path=/; max-age=3600; SameSite=Lax");else{let e=document.cookie.split(";").find(e=>e.trim().startsWith("access_token="));e&&u(e.split("=")[1])}},[g.query]);let j=async s=>{if(s.preventDefault(),x(!0),p(null),w(!1),e!==t){p("Passwords do not match"),x(!1);return}try{l&&c.N.auth.setSession(l);let{error:s}=await b(e);if(s)throw s;w(!0),document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(()=>{g.push("/auth/signin")},3e3)}catch(e){console.error("Error updating password:",e),p(e.message||"Failed to update password")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-md shadow mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Reset Your Password"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Please enter your new password below."}),h&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:h}),f&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:"Password updated successfully! Redirecting to sign in..."}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsx)("input",{type:"hidden",name:"access_token",value:l}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsx)("input",{type:"password",id:"new_password",value:e,onChange:e=>s(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",id:"confirm_password",value:t,onChange:e=>i(e.target.value),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"********",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold",disabled:m||!l,children:m?"Updating...":"Update Password"})]}),(0,a.jsx)("div",{className:"mt-4 text-center text-sm",children:(0,a.jsx)(o(),{href:"/auth/signin",children:(0,a.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:"Back to Sign In"})})})]})}u.getLayout=function(e){return(0,a.jsx)(l.A,{title:"Reset Password - Guestify",children:e})}}},e=>{var s=s=>e(e.s=s);e.O(0,[92,636,593,792],()=>s(2820)),_N_E=e.O()}]);